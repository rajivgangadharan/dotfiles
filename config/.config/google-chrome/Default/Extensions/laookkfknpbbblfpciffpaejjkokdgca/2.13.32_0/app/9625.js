(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[9625,3578],{83578:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var n=i(20144),s=i(88026),a=i(51726),o=i.n(a),d=i(55482),c=i(7838),l=i(35174);let r={};const p={bind:function(e,t){m.utils.isTouchDevice()&&(e.dataset.justBoundMobileClickHandler=!0,setTimeout((()=>{e.dataset.justBoundMobileClickHandler=!1}),100),e.dataset.mobileClickHandlerId=Math.random().toString(36).substring(7),r[e.dataset.mobileClickHandlerId]=t.value,e.addEventListener("click",t.value))},unbind:function(e){m.utils.isTouchDevice()&&(e.removeEventListener("click",r[e.dataset.mobileClickHandlerId]),delete r[e.dataset.mobileClickHandlerId],delete e.dataset.mobileClickHandlerId,delete e.dataset.justBoundMobileClickHandler)}};let u={};const h={bind:function(e,t){let i,n;e.dataset.justBoundClickOutsideHandler=!0,setTimeout((()=>{e.dataset.justBoundClickOutsideHandler=!1}),100);const s=e=>{n=!1,(e=>e&&e.clientX>window.innerWidth)(e)?n=!0:i=e.target},a=s=>{n||(t.modifiers.bubble||!e.contains(i)&&!e.contains(s.target)&&e!==i&&e!==s.target&&"true"!==e.dataset.justBoundClickOutsideHandler)&&t.value(s)};e.dataset.clickOutsideMouseupHandlerId=Math.random().toString(36).substring(7),e.dataset.clickOutsideMousedownHandlerId=Math.random().toString(36).substring(7),u[e.dataset.clickOutsideMouseupHandlerId]=a,u[e.dataset.clickOutsideMousedownHandlerId]=s,document.addEventListener("mouseup",a),document.addEventListener("mousedown",s)},unbind:function(e){var t,i;null!==(t=e.dataset)&&void 0!==t&&t.clickOutsideMouseupHandlerId&&null!==(i=e.dataset)&&void 0!==i&&i.clickOutsideMousedownHandlerId&&(document.removeEventListener("mouseup",u[e.dataset.clickOutsideMouseupHandlerId]),document.removeEventListener("mousedown",u[e.dataset.clickOutsideMousedownHandlerId]),delete u[e.dataset.clickOutsideMouseupHandlerId],delete u[e.dataset.clickOutsideMousedownHandlerId],delete e.dataset.clickOutsideMouseupHandlerId,delete e.dataset.clickOutsideMousedownHandlerId,delete e.dataset.justBoundClickOutsideHandler)}};var v=i(94130),g=i(77197),f=i(72433);n.ZP.use(s.Z,{name:"unreactive"}),n.ZP.use(o()),n.ZP.use(d.qK),n.ZP.use(g.Z),n.ZP.use(f.ZP),n.ZP.use(v.Z),n.ZP.prototype.$xhr=l.Z,n.ZP.prototype.$e=c.Z,n.ZP.directive("mobile-click",p),n.ZP.directive("click-outside",h),new n.ZP({bb:()=>({conditionalFeatures:m.conditionalFeatures,teamInfo:m.models.teamInfo,date:m.models.date,balance:m.models.balanceMode,bookmarksSettings:m.models.bookmarksSettings})}),n.ZP.mixin({unreactive:()=>({$touch:m.utils.isTouchDevice()}),computed:{$mobile:()=>m.reactive.windowDimensions.width<=450,$plus:()=>m.conditionalFeatures.featureEnabled("plus"),$team:()=>m.conditionalFeatures.featureEnabled("team"),$admin:()=>m.models.teamInfo&&m.models.teamInfo.get("team")&&m.models.teamInfo.get("team").userIsAdmin},pinia:v.Z});const b=n.ZP},13990:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={countdowns:{type:"countdowns",icon:i(77917),upsellId:"UPSELL_COUNTDOWNS"},metrics:{type:"metrics",icon:i(80660),upsellId:"UPSELL_METRICS"},clocks:{type:"clocks",names:{fullLowerCasePlural:"world clocks"},icon:i(31584),upsellId:"UPSELL_WORLD_CLOCKS"}}},42223:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={data:()=>({componentsMounted:{}}),unreactive:()=>({uid:m.utils.shortId()}),beforeCreate(){const e=this.$options.components;Object.keys(e).forEach((t=>{const i=e[t];"function"==typeof i&&(e[t]=function(){this.$set(this.componentsMounted,t,!1);const e=`${t}:${this.uid}:mounted`,n=()=>this.componentsMounted[t]=!0;return this.$e.$once(e,n),i(arguments).then((i=>{const s=i.default;return s&&s.doNotWaitForMount&&(this.$delete(this.componentsMounted,t),this.$e.$off(e,n)),i}))}.bind(this))}))},created(){this.$e.$on("widgets:timeoutExceeded",this.onWidgetTimeout)},mounted(){if(Object.keys(this.componentsMounted).length){const e=this.$watch("componentsMounted",(t=>{Object.values(t).every((e=>e))&&(this.onAllComponentsMounted(),e())}),{deep:!0,immediate:!0})}else this.onAllComponentsMounted()},destroyed(){this.stopListeningToWidgetTimeout()},methods:{stopListeningToWidgetTimeout(){this.$e.$off("widgets:timeoutExceeded",this.onWidgetTimeout)},getContextUid(){return this.$vnode&&this.$vnode.context&&this.$vnode.context.uid||""},onAllComponentsMounted(){this.onAllComponentsMountedOverride?this.onAllComponentsMountedOverride():this.widgetId?m.widgetManager.appReady(this.widgetId):this.emitComponentMounted(),this.stopListeningToWidgetTimeout()},emitComponentMounted(){this.$e.$emit(`${this.$options.name}:${this.getContextUid()}:mounted`)},onWidgetTimeout(){const e=Object.keys(this.componentsMounted).filter((e=>!this.componentsMounted[e]));e.length&&console.warn(`${this.$options.name} is awaiting ${e.join(", ")} to mount.`)}}}},20712:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var n=i(8081),s=i.n(n),a=i(23645),o=i.n(a)()(s());o.push([e.id,"\n/* stylelint-disable */\n.app-container[data-v-de31ca60] { order: 100; align-self: flex-start;\n}\n.app-dash[data-v-de31ca60] {\n}\n.active .app-dash[data-v-de31ca60] { opacity: 1;\n}\n.placeholder[data-v-de31ca60] { position: relative; display: inline-block;\n} /* inline-block needed for Firefox */\n.placeholder .hide[data-v-de31ca60] { opacity: 0;\n}\n.placeholder .icon-add[data-v-de31ca60] { --icon-size: 21px; position: absolute; right: 0; bottom: 4px;\n}\n.Safari .icon-add[data-v-de31ca60] { -webkit-transform: translate3d(0, 0, 0);\n} /* fixes subpixel movement when hovering */\n.metric-label[data-v-de31ca60] { white-space: nowrap;\n}\n.app[data-v-de31ca60] { --app-padding: 27px; text-align: center;\n}\n.title-wrapper[data-v-de31ca60] { padding: 0 0 12px;\n}\n.title[data-v-de31ca60] { margin: -3px 0 3px; color: var(--color-accent-safe); font-size: 20px; font-weight: 600;\n}\n.description[data-v-de31ca60] { margin: 4px 0; opacity: 0.7; font-size: 14px;\n}\n.tiles[data-v-de31ca60] { display: flex; justify-content: space-between;\n}\n.tile[data-v-de31ca60] { width: 32%; padding: 10px; display: flex; flex-direction: column; align-items: center; justify-content: flex-start; border-radius: var(--border-radius); cursor: pointer;\n}\n.tile[data-v-de31ca60]:hover { background: var(--color-stop-1);\n}\n.tile[data-v-de31ca60]:hover:active { background: var(--color-stop-2);\n}\n[data-v-de31ca60] .widget-icon { --size: 24px; height: var(--size); width: var(--size); margin: 5px auto 6px; opacity: 0.9;\n}\n.widget-name[data-v-de31ca60] { font-size: 15px;\n}\n.tile .badge[data-v-de31ca60] { margin-top: 5px; margin-left: 0;\n}\n.mobile-close[data-v-de31ca60] { position: absolute; top: var(--app-padding); right: var(--app-padding);\n}\n@media screen and (max-width: 450px) {\n.app-container[data-v-de31ca60] { display: none;\n}\n\t\t/*.app { position: fixed; right: var(--app-offset); }*/\n\t\t/*\t.nipple-top-right:after { right: 104px; }*/\n}\n",""]);const d=o},14666:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeApp,expression:"closeApp"}],staticClass:"app-container add-metric needs-hover",class:{active:e.popupActive}},[t("div",{staticClass:"app-dash metric-item add-shadow",attrs:{"data-ob":"add-metric","data-test":"add-metric-dash"},on:{click:e.toggleApp}},[t("div",{staticClass:"metric-stat"},[t("span",{staticClass:"placeholder"},[t("span",{staticClass:"hide"},[e._v("a")]),e._v(" "),t("inline-svg",{staticClass:"icon icon-add",attrs:{src:i(49146)}})],1)]),e._v(" "),e._m(0)]),e._v(" "),t("transition",{attrs:{name:"slide-down-fade"}},[e.popupActive?t("app-popup",{attrs:{position:"bottom-left",width:420,region:"top-right",focused:e.focused},nativeOn:{click:function(t){e.focused=!0}}},[[t("div",{staticClass:"title-wrapper"},[t("div",{staticClass:"title"},[e._v("Add metric")]),e._v(" "),t("div",{staticClass:"description"},[e._v("Keep track of important info.")])]),e._v(" "),t("div",{staticClass:"tiles"},e._l(e.collections,(function(i){return t("div",{key:i.nameLCP,staticClass:"tile",attrs:{"data-test":"add-"+i.nameLCS},on:{click:function(t){return e.add(i)}}},[t("inline-svg",{staticClass:"icon widget-icon",class:"icon-"+i.nameLCP,attrs:{src:i.icon}}),e._v(" "),t("div",{staticClass:"widget-name"},[e._v(e._s(i.fullNameCS))]),e._v(" "),e.$plus?e._e():t("span",{staticClass:"badge badge-plus"},[e._v("Plus")])],1)})),0),e._v(" "),e.$touch?t("span",{staticClass:"mobile-close",on:{click:e.closeApp}},[t("span",{staticClass:"icon-wrapper u--mobile-show-bg hide"},[t("inline-svg",{staticClass:"icon icon-hide",attrs:{src:i(41226)}})],1)]):e._e()]],2):e._e()],1)],1)};n._withStripped=!0;var s=i(42223),a=i(81405),o=i(63139);const d=new a.ZP({feature:"meta add"}),c={name:"AddMetric",components:{AppPopup:()=>i.e(8566).then(i.bind(i,78566))},mixins:[s.Z],props:{disable:{type:Boolean,default:!1},collections:{type:Object,required:!0},standalone:{type:Boolean,default:!1}},data:()=>({popupActive:!1}),computed:{nippleClass(){return this.openToRight?"nipple-top-left":"nipple-top-right"},focused:{get:()=>o.Z.isOnTop("addMetric"),set(e){e?o.Z.add("addMetric"):o.Z.remove("addMetric")}}},created(){this.standalone&&(this.widgetId="addMetric"),m.on("globalEvent:esc",this.closeApp)},destroyed(){m.off("globalEvent:esc",this.closeApp)},methods:{add(e){this.$plus?(this.closeApp(),this.$emit("add",e.nameLCP)):e.upsellId&&this.showUpsell(e.upsellId),m.trigger("notification:dismiss")},toggleApp(){this.popupActive?this.closeApp():this.showApp()},showApp(){if(this.disable)return;this.openToRight=!1,d.capture("meta add click"),this.popupActive=!0;const e=document.querySelector(".popup:not(.app)");e&&(e.style.display="none"),this.focused=!0},closeApp(){if(!this.popupActive)return;this.popupActive=!1;const e=document.querySelector(".popup");e&&(e.style.display="block"),this.focused=!1},showUpsell(e){m.cmd("modal.open",e,{eventSource:"dash"})}}};i(57708);const l=(0,i(51900).Z)(c,n,[function(){var e=this._self._c;return e("div",{staticClass:"metric-label"},[e("span",{staticClass:"metric-label-name"},[this._v("Add")])])}],!1,null,"de31ca60",null).exports},57708:(e,t,i)=>{var n=i(20712);n.__esModule&&(n=n.default),"string"==typeof n&&(n=[[e.id,n,""]]),n.locals&&(e.exports=n.locals),(0,i(45346).Z)("3db8f3ce",n,!1,{ssrId:!0})}}]);