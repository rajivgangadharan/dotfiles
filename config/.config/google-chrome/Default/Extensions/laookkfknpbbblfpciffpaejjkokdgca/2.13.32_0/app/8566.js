(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[8566,5323],{65550:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const s=new(i(20144).ZP.extend({name:"GlobalKeyEventManager",data:()=>({events:{}}),methods:{registerEventListener(t,e,i,s){Object.prototype.hasOwnProperty.call(this.events,e)?Object.prototype.hasOwnProperty.call(this.events[e],i)||(this.events[e][i]=[]):(this.events[e]={},this.events[e][i]=[],this._addListener(e)),this.events[e][i].push({id:t,handler:s})},removeEventListener(t,e,i){if(!Object.prototype.hasOwnProperty.call(this.events,e))return void(m.utils.isDev()&&console.warn(`No event listeners registered with event type: ${e} to remove`));if(!Object.prototype.hasOwnProperty.call(this.events[e],i))return void(m.utils.isDev()&&console.warn(`No event listeners registered with keyCode: ${i} to remove`));let s=this.events[e][i].findIndex((e=>e.id===t));-1!==s?(this.events[e][i].splice(s,1),this._cleanupIfEmpty(e,i)):m.utils.isDev()&&console.warn(`No event listeners registered with id: ${t} to remove`)},_cleanupIfEmpty(t,e){this.events[t][e].length||delete this.events[t][e],Object.keys(this.events[t]).length||(delete this.events[t],this._removeListener(t))},_addListener(t){window.addEventListener(t,this._eventRouter)},_removeListener(t){window.removeEventListener(t,this._eventRouter)},_eventRouter(t){if(m.tourActive)return;if(!Object.prototype.hasOwnProperty.call(this.events,t.type))return;if(!Object.prototype.hasOwnProperty.call(this.events[t.type],t.keyCode))return;let e=this.events[t.type][t.keyCode];e[e.length-1].handler(t)}}}))},55837:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});var s=i(8081),n=i.n(s),o=i(23645),a=i.n(o)()(n());a.push([t.id,"\n/* stylelint-disable */\n.app[data-v-883f3f74] { --top: auto; --bottom: auto; --right: auto; --left: auto; height: auto; min-height: auto; width: var(--width); max-width: calc(100vw - (var(--app-edge-padding) * 2)); position: absolute; top: var(--top); bottom: var(--bottom); right: var(--right); left: var(--left); display: flex; flex-direction: column; align-items: stretch; background-color: var(--color-bg); border-radius: var(--border-radius); transition: top 0.2s ease, right 0.2s ease;\n}\n.app.focused[data-v-883f3f74] { z-index: 4;\n}\n.nipple-top-left[data-v-883f3f74]:after, .nipple-bottom-left[data-v-883f3f74]:after { left: var(--nipple-displacement);\n}\n.nipple-top-right[data-v-883f3f74]:after, .nipple-bottom-right[data-v-883f3f74]:after { right: var(--nipple-displacement);\n}\n\t/* This needs to be in this component (or general stylesheet) or else the transition won't work when the component is async. I don't know why. */\n.slide-down-fade-enter-active[data-v-883f3f74], .slide-down-fade-leave-active[data-v-883f3f74] { transition: transform 0.2s ease, opacity, 0.2s ease, right 0s, top 0s;\n} /* right 0s, top 0s is to fix a case where the app transitions right when opening if it is flipping horizontal direction */\n.slide-down-fade-enter[data-v-883f3f74], .slide-down-fade-leave-to[data-v-883f3f74] { opacity: 0; transform: translateY(-3px);\n}\n@media screen and (max-width: 450px) {\n.app[data-v-883f3f74] { height: var(--app-max-height); position: fixed !important;\n}\n.top-row .app[data-v-883f3f74] { top: var(--app-edge-padding) !important;\n}\n.bottom-row .app[data-v-883f3f74] { bottom: var(--app-edge-padding) !important;\n}\n.top-left .app[data-v-883f3f74], .bottom-left .app[data-v-883f3f74] { left: var(--app-edge-padding) !important;\n}\n.top-right .app[data-v-883f3f74], .bottom-right .app[data-v-883f3f74] { right: var(--app-edge-padding) !important;\n}\n.app.slide-down-fade-enter-active[data-v-883f3f74], .app.slide-down-fade-leave-active[data-v-883f3f74] { transition: transform 0.2s ease, opacity, 0.2s ease, right 0s, top 0s;\n} /* right 0s, top 0s is to fix a case where the app transitions right when opening if it is flipping horizontal direction */\n.app.slide-down-fade-enter[data-v-883f3f74], .app.slide-down-fade-leave-to[data-v-883f3f74] { opacity: 0; transform: translateY(calc(var(--app-translate-amount) * -1));\n}\n}\n\n",""]);const r=a},78566:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>a});var s=function(){var t=this;return(0,t._self._c)("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],ref:"app",staticClass:"app popup nipple",class:[{focused:t.focused},"display-"+t.positionArray[0],"display-"+t.positionArray[1],t.nippleClass],style:[{"--width":t.width+"px","--nipple-displacement":t.shiftedNippleDisplacement+"px"},t.positionCss],attrs:{"data-test":"app-popup"}},[t._t("default")],2)};s._withStripped=!0;var n=i(65550);const o={name:"AppPopup",doNotWaitForMount:!0,unreactive:()=>({halfNippleWidth:m.constants.nippleWidthPx/2}),props:{nippleDisplacement:{type:Number,default:m.constants.nippleDisplacementPx},width:{type:Number,default:300},viewManager:{type:Object,default:null},position:{type:String,required:!0},detailedPosition:{type:Object,default:null},region:{type:[String,Array],required:!0},focused:{type:Boolean,default:!1}},data:()=>({flipHorizontalPosition:!1,shiftByPx:0}),computed:{positionArray(){const t=this.position.split("-");return this.flipHorizontalPosition&&(t[1]=m.utils.getOppositePosition(t[1])),t},nippleClass(){return["nipple"].concat(this.positionArray.map(m.utils.getOppositePosition)).join("-")},positionCss(){const t=this.detailedPosition||{[m.utils.getOppositePosition(this.positionArray[0])]:"100%",[m.utils.getOppositePosition(this.positionArray[1])]:"50%"};return Object.entries(t).reduce(((t,[e,i])=>(["left","right"].includes(e)&&("number"==typeof i?i=i-(this.flipHorizontalPosition?this.width-2*this.nippleDisplacement:0)-this.shiftByPx:"string"==typeof i&&(i=`calc(${i} - ${this.nippleDisplacement-this.shiftByPx}px)`)),t["--"+e]="number"==typeof i?i+"px":i,t)),{})},shiftedNippleDisplacement(){return this.nippleDisplacement-this.halfNippleWidth-this.shiftByPx}},mounted(){this.flipHorizontalPosition=this.shouldFlipHorizontalPosition(),this.$nextTick((()=>this.shiftByPx=this.getShiftPx())),this.hideOverlappingWidgets()},created(){n.Z.registerEventListener("closeApp","keyup",27,this.close),window.addEventListener("resize",this.onWindowResize)},destroyed(){n.Z.removeEventListener("closeApp","keyup",27),window.removeEventListener("resize",this.onWindowResize),m.widgetManager.refocusOverlap(this.region)},methods:{onClickOutside(t){this.viewManager?this.viewManager.awaitCloseConfirmationIfNeeded().then((()=>this.$emit("clickOutside",t))):this.$emit("close")},onWindowResize(){this.disableSmoothReflow=!0,clearTimeout(this.debouceResize),this.debouceResize=setTimeout((()=>{this.disableSmoothReflow=!1}),500)},shouldFlipHorizontalPosition(){const t=this.$refs.app&&this.$refs.app.getBoundingClientRect();return!!t&&t.left<0},getShiftPx(){const t=this.$refs.app&&this.$refs.app.getBoundingClientRect();return t?"left"===this.positionArray[1]?Math.max(t.right-(window.innerWidth-m.constants.dashboardSidePaddingPx),0):Math.max(-1*(t.left-m.constants.dashboardSidePaddingPx),0):0},close(){this.$emit("close")},hideOverlappingWidgets(){var t,e;let i=(null===(t=this.$refs.view)||void 0===t?void 0:t.scrollHeight)||(null===(e=this.$refs.loading)||void 0===e?void 0:e.scrollHeight);i&&m.widgetManager.unfocusOverlap(this.region,i)}}};i(86429);const a=(0,i(51900).Z)(o,s,[],!1,null,"883f3f74",null).exports},86429:(t,e,i)=>{var s=i(55837);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[t.id,s,""]]),s.locals&&(t.exports=s.locals),(0,i(45346).Z)("47320fb7",s,!1,{ssrId:!0})}}]);