"use strict";(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[5346,4145,7314],{27314:(e,t,a)=>{a.r(t),a.d(t,{scenes:()=>o});const s={fire:{uuid:"32E55A2C-218E-452C-99A5-F377E820B34D",name:"Fire",icon:a(63366),url:"https://az814671.vo.msecnd.net/blogimages/276f1472-734e-492c-9138-c1584fb6cd80"},crickets:{uuid:"877124D8-4BE5-40D2-9C1B-966403D34D7C",name:"Crickets",icon:a(92909),url:"https://az814671.vo.msecnd.net/blogimages/7969c39a-f659-40e3-a357-11060161ce74"},ocean:{uuid:"A912DBAB-5C9C-4C7C-8178-51AB5B6BC66E",name:"Ocean",icon:a(2353),url:"https://az814671.vo.msecnd.net/blogimages/3f851f30-5854-4fdb-805a-3f302ba56a81"},wind:{uuid:"98428CC-4225-4622-8916-0841A3886460",name:"Wind",icon:a(27093),url:"https://az814671.vo.msecnd.net/blogimages/ebcb630e-5cb3-4a64-a2d4-eec16c9abf41"},seagulls:{uuid:"92AED14F-BE35-45E5-ADBD-B38F8C548699",name:"Seagulls",icon:a(98324),url:"https://az814671.vo.msecnd.net/blogimages/c0b4e5c6-ab66-42ce-aea3-5d6a419583cb"},tracks:{uuid:"D6EE305A-2EBF-4119-9A0A-71D09946E621",name:"Tracks",icon:a(93762),url:"https://az814671.vo.msecnd.net/blogimages/38228a91-cfa9-45b1-ada9-c16b619c2568"},rainOnSurface:{uuid:"8C65E875-1AA4-43C5-A140-0392E45741B8",name:"Rain on surface",icon:a(68935),url:"https://az814671.vo.msecnd.net/blogimages/08e95b57-7dbe-4ba8-83a7-8b19fc254ae1"},rain:{uuid:"1D63CBB9-FC3F-4B06-9281-EC463451C0AF",name:"Rain",icon:a(29539),url:"https://az814671.vo.msecnd.net/blogimages/eac6cdc4-1f53-4fc5-92dd-0a4c053de028"},birds:{uuid:"CC4EA0EB-9DF2-4F55-BE24-6D519CB36CF1",name:"Birds",icon:a(74214),url:"https://az814671.vo.msecnd.net/blogimages/84d9d4e7-1d54-4300-a347-8f2650eafd51"},insects:{uuid:"9126E055-07E3-44E3-AD18-7CD1E6420609",name:"Insects",icon:a(34733),url:"https://az814671.vo.msecnd.net/blogimages/5875d483-396c-4bfe-a5d4-160384c18832"},chimes:{uuid:"E7019F40-9C4D-4B58-A2C6-B4FF2831E6DE",name:"Chimes",icon:a(21811),url:"https://az814671.vo.msecnd.net/blogimages/c30b03c9-91e0-43ce-9aa9-199e7aa0b76a"},cafe:{uuid:"3A188244-471F-41BF-9CF3-C700C2153C6D",name:"Café",icon:a(93692),url:"https://az814671.vo.msecnd.net/blogimages/6f8cf03d-c7f2-45b7-898d-576385236122"},coffeeMaker:{uuid:"86A2C11A-1A74-4832-AE1F-1A7CB4C0A970",name:"Coffee Maker",icon:a(75047),url:"https://az814671.vo.msecnd.net/blogimages/43769f50-e91e-4595-91b4-8248372f39d2"},thunder:{uuid:"D19ECB22-814B-4504-A51D-A056B79BA8E7",name:"Thunder",icon:a(6836),url:"https://az814671.vo.msecnd.net/blogimages/8291e604-c11a-4b45-b844-2e464527a2e1"},loudRain:{uuid:"581EA3E4-5FD1-485D-8337-F6B1EF9BDB16",name:"Loud Rain",icon:a(98152),url:"https://az814671.vo.msecnd.net/blogimages/31fca0bf-8792-458f-8c13-f605b5618275"},stream:{uuid:"8DAFC567-C77A-479A-8873-450914531283",name:"Stream",icon:a(14789),url:"https://az814671.vo.msecnd.net/blogimages/2374f3af-35fd-4ab8-96c3-5e70775ca33a"},coWorkers:{uuid:"EA463EB3-E751-49A9-B1AC-565F2D87194F",name:"Co-workers",icon:a(8740),url:"https://az814671.vo.msecnd.net/blogimages/7a5fc995-0278-4386-bf30-b5672dfdd95b"},copier:{uuid:"6492F3E6-6517-46EF-B211-AE02E905FDB2",name:"Copier",icon:a(39415),url:"https://az814671.vo.msecnd.net/blogimages/3e1f826c-dca2-4fe7-a10f-bf07c56ecfa8"},airConditioner:{uuid:"F88D0945-3DBB-456D-8CF5-812745566F2E",name:"Air Conditioner",icon:a(74101),url:"https://az814671.vo.msecnd.net/blogimages/e55e01b5-6fe8-43b3-b50b-18ce4f670472"},fluorescentHum:{uuid:"B3FC885D-06BB-4531-9699-F4EA73894AFB",name:"Fluorescent Hum",icon:a(33577),url:"https://az814671.vo.msecnd.net/blogimages/58fdb1ba-8821-4abe-8daf-704ee656e369"},mechanicalKeyboard:{uuid:"17718B1A-A842-4CDA-844F-BC2AC9E7ADD5",name:"Mechanical Keyboard",icon:a(48376),url:"https://az814671.vo.msecnd.net/blogimages/f295aec4-9d59-47b2-b31a-ba88f23d4628"}};Object.values(s).forEach((e=>e.volume=0));const o=[{name:"Campfire",icon:a(47696),tracks:[{...s.fire,volume:90},{...s.crickets,volume:2}]},{name:"Beach",icon:a(2455),tracks:[{...s.ocean,volume:50},{...s.wind,volume:15},{...s.seagulls,volume:5}]},{name:"Train",icon:a(99332),tracks:[{...s.tracks,volume:90},{...s.wind,volume:10}]},{name:"Rainfall",icon:a(13061),tracks:[{...s.rainOnSurface,volume:50},{...s.rain,volume:50}]},{name:"Forest",icon:a(77660),tracks:[{...s.birds,volume:75},{...s.wind,volume:10},{...s.insects,volume:5}]},{name:"Garden",icon:a(4762),tracks:[{...s.chimes,volume:50},{...s.insects,volume:1},{...s.wind,volume:10}]},{name:"Café",icon:a(11711),tracks:[{...s.cafe,volume:50},{...s.coffeeMaker,volume:55}]},{name:"Thunderstorm",icon:a(8533),tracks:[{...s.thunder,volume:90},{...s.loudRain,volume:55},{...s.wind,volume:45},{...s.rain,volume:25}]},{name:"Creek",icon:a(54812),tracks:[{...s.stream,volume:20},{...s.wind,volume:10}]},{name:"Office",icon:a(45534),tracks:[{...s.coWorkers,volume:13},{...s.copier,volume:8},{...s.airConditioner,volume:7},{...s.fluorescentHum,volume:3},{...s.mechanicalKeyboard,volume:1}]},{name:"Random",icon:a(12046)},{name:"Custom",icon:a(56248),tracks:Object.values(s)}]},65228:(e,t,a)=>{a.d(t,{apps:()=>l});var s=a(20144),o=a(68122),n=a(70237),i=a(40531),r=a(27314),c=a(54046),d=a(7838);const u=()=>{localStorage.setItem(c.cb,Date.now().toString())},l={pomodoro:{icon:"icon/pomodoro",name:"Pomodoro",description:"Timed focus and rest intervals",enable:()=>(m.trigger("centerBelow:show",!1),localStorage.removeItem("pomodoro-started"),localStorage.removeItem("pomodoro-time-remaining"),(async()=>{"true"===localStorage.getItem("pomodoro-showing")?await n.Z.delay(2*c.mQ):await new Promise((e=>m.on("pomodoro:created",e))),m.trigger("pomodoro:reset"),"true"!==localStorage.getItem("pomodoro-running")&&m.trigger("pomodoro:togglePlay")})(),!0),disable:()=>{"true"===localStorage.getItem("pomodoro-running")&&m.trigger("pomodoro:togglePlay"),localStorage.removeItem("pomodoro-started"),localStorage.removeItem("pomodoro-time-remaining")}},soundscapes:{icon:"icon/soundscapes",name:"Soundscapes",description:"Background sounds",enable:async e=>{var t,s;const o=(await a.e(6730).then(a.bind(a,16730))).default;d.Z.sendCrossTabMessage("soundscapes:stop"),m.trigger("soundscapes:stop"),m.trigger("soundscapes:togglePopup",!1);let c=null===(s=null===(t=i.wA.focusModeSettings.apps)||void 0===t?void 0:t.soundscapes)||void 0===s?void 0:s.preset;return c&&"Random"!==c||(c=e&&"string"==typeof e?e:n.Z.getRandomItem([...r.scenes.flatMap((e=>"Random"===e.name||"Custom"===e.name?[]:[e.name]))])),m.trigger("soundscapes:play",c),o.globalPlaying||(o.globalPlaying=!0),addEventListener("beforeunload",u),c},disable:()=>{m.trigger("soundscapes:stop"),d.Z.sendCrossTabMessage("soundscapes:stop"),removeEventListener("beforeunload",u),localStorage.removeItem(c.cb)},shouldEnableOnResume:()=>{const e=Number(localStorage.getItem(c.cb));return localStorage.removeItem(c.cb),!!(e&&!isNaN(e)&&e>Date.now()-3e4)},shouldDisableEnableOnSettingChangeWhileFocusing:!0},tabStash:{icon:"icon/tabs",name:"Tab Stash",description:"Hide open tabs & restore later",enable:async()=>{const e=(await o.Z.tabsStore())(),t=await e.stashSession();return!!t&&t.id},disable:async({enableResult:e,inactive:t})=>{var a;if(t)return;const i=(await o.Z.tabsStore())();if(i.loaded&&!i.loading||(await new Promise((e=>{(0,s.YP)((()=>i.loaded),e),i.loading||i.refresh()})),await n.Z.delay(1e3)),m.conditionalFeatures.featureEnabled("plus")||m.conditionalFeatures.featureEnabled("tab-stash-degraded")||(e=null===(a=i.getItems[0])||void 0===a?void 0:a.id),"string"==typeof e){const t=i.getItemById(e);t&&await i.restoreSession(t)}},get unsupported(){return n.Z.isSafari()}}}},85346:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v,useFocusModeSessionStore:()=>g});var s=a(63420),o=a(20144),n=a(54046),i=a(67652),r=a(70287),c=a(65228);const d=["pomodoro","soundscapes","tabStash"];var u=a(70237);let l;const p=(0,a(32542).p)((({loadedRef:e,updateAsync:t})=>(0,s.Q_)("focusModeSession",{state:()=>({start:1,stop:1,appActivationData:{},capacityLimitInfo:{msUsed:0,date:u.Z.getDateOnly(new Date)},lastInteraction:Date.now(),totalTimeFocused:0}),getters:{focusModeActive:e=>!e.stop,loaded:()=>e.value,capacityLimitInfoForToday(){const e=this.capacityLimitInfo,t=m.models.date.get("date"),a=u.Z.getDateOnly(t);return e.date!==a?{date:a,msUsed:0}:e},msUntilOverCapacityLimit(){const e=n.Le,t=this.capacityLimitInfoForToday.msUsed,a=m.models.date.get("seconds").getTime();return e-(t+(this.focusModeActive?a-this.start:0))},isOverCapacityLimit(){return this.msUntilOverCapacityLimit<=0},shouldAutoDisable(){const e=m.models.date.get("date").getTime();return this.focusModeActive&&this.lastInteraction<e-n.oF},totalTimeFocusedIncludingCurrentSession(){const e=m.models.date.get("date").getTime();let t=this.totalTimeFocused;return this.focusModeActive&&(t+=e-this.start),Math.max(t,0)}},actions:{async update(e){await t(e)},async stopAndSaveFocusMode(){const e=this.capacityLimitInfoForToday,t=Date.now(),a=t-this.start;e.msUsed+=a;const s=this.totalTimeFocused+a;await this.update({stop:t,capacityLimitInfo:e,totalTimeFocused:s,appActivationData:{}}),this.refreshLastInteraction({debounceTime:0})},async startAndSaveFocusMode(e){const t=this.capacityLimitInfoForToday;await this.update({start:Date.now(),stop:null,appActivationData:e,capacityLimitInfo:t}),this.refreshLastInteraction({debounceTime:0})},refreshLastInteraction({debounceTime:e=3e3}){this.focusModeActive&&(clearTimeout(l),l=window.setTimeout((()=>{this.update({lastInteraction:Date.now()})}),e))},async disableAppsBeforeStop(e){for(const t of d){const a=c.apps[t];a.unsupported||await a.disable({enableResult:this.appActivationData[t],inactive:e})}}}})),{mode:i.Z.Cache,syncAutomatically:!0}),h=p();(0,o.YP)((()=>h.loaded),(e=>{e&&r.Z.switchOverToWatchedStoreItem((()=>h.focusModeActive))}));const g=p,b=g(),v=()=>b},32542:(e,t,a)=>{a.d(t,{p:()=>i});var s=a(20144),o=a(34145),n=a(67652);const i=(e,{mode:t=n.Z.Sync,path:a="",responseProperty:i,syncAutomatically:r=!1}={})=>{const c=(0,s.iH)(!1),d=(0,s.iH)(!1),m=e=>{0!==e.length&&e.forEach((e=>l.add(e)))},u=async e=>{await p.update(h.$id,e,{appendIdToPath:!1})},l=new Set,p=new o.U("main",{mode:t,path:a}),h=e({loadedRef:c,loadingRef:d,updateAsync:async e=>{m(Object.keys(e)),g.$state={...g.$state,...e},await u(e)},refresh:async()=>{c.value||d.value?await p.refresh({id:h.$id,appendIdToPath:!1,timestampKey:h.$id}):b()}}),g=h(),b=()=>{g.$subscribe((e=>{c.value&&"payload"in e&&(m(Object.keys(e.payload)),u(e.payload))})),Object.keys(g.$state).forEach((e=>(0,s.YP)((()=>g[e]),(async t=>{c.value&&(l.has(e)?l.delete(e):await p.update(h.$id,{[e]:t},{appendIdToPath:!1}))})))),d.value=!0,p.get({id:h.$id,success:e=>{c.value=!0,d.value=!1,e&&(m(Object.keys(e)),g.$state={...g.$state,...e})},failure:e=>console.error(e),appendIdToPath:!1,responseProperty:i,timestampKey:h.$id})};return r&&b(),h}},34145:(e,t,a)=>{a.d(t,{U:()=>r});var s=a(42935),o=a(24960),n=a(67652),i=a(35597);class r{constructor(e,{queryParams:t={},getResponseProperty:a,path:s="",mode:i=n.Z.Sync}={}){this.type=e,this.queryParams=t,this.getResponseProperty=a,this.path=s,this.mode=i,this.dataSync=o.Z}get({id:e,path:t=this.path||this.type,mode:a=this.mode,success:s,failure:o,queryParams:r={},retry:c,responseProperty:d=this.getResponseProperty,appendIdToPath:m,timestampKey:u=this.type}){(async()=>{var l;a===n.Z.Timestamp&&(a=await i.Z.requiresSync(u)?n.Z.Sync:n.Z.Cache,i.Z.addUpdateListener(u,this.refresh.bind(this,{id:e,path:t,queryParams:r,retry:c,responseProperty:d,appendIdToPath:m,timestampKey:u}))),t+=this.buildQueryString((null===(l=this.queryParams)||void 0===l?void 0:l.get)||{},r);const p=[this.type,{id:e,path:t,env:this.getEnv(),mode:a,retry:c,responseProperty:d,appendIdToPath:m,timestampKey:u}];a===n.Z.Server?this.dataSync.sendMessage({handler:"get",args:p}).then(s).catch(o):this.dataSync.sendRecurringCrossTabMessage({msgId:`${this.type}${e?`:${e}`:""}:refreshed`,handler:"get",args:p,success:s,failure:o})})()}refresh({id:e,path:t=this.path||this.type,queryParams:a={},retry:s,responseProperty:o=this.getResponseProperty,appendIdToPath:i,timestampKey:r=this.type}={}){return new Promise(((c,d)=>this.get({id:e,mode:n.Z.Server,path:t,queryParams:a,retry:s,success:c,failure:d,responseProperty:o,appendIdToPath:i,timestampKey:r})))}async create(e,t,{path:a=this.path||this.type,mode:s=this.mode}={}){const o=[this.type,e,t];o.push({path:a,mode:s,env:this.getEnv()}),await this.dataSync.sendMessage({handler:"create",args:o})}async update(e,t,{path:a=this.path||this.type,mode:s=this.mode,queryParams:o={},appendIdToPath:n}={}){var i;const r=this.buildQueryString((null===(i=this.queryParams)||void 0===i?void 0:i.update)||{},o),c=[this.type,e,t];c.push({path:a,mode:s,env:this.getEnv(),queryString:r,appendIdToPath:n}),await this.dataSync.sendMessage({handler:"update",args:c})}async delete(e,{path:t=this.path||this.type,mode:a=this.mode}={}){const s=[this.type,e];s.push({path:t,mode:a,env:this.getEnv()}),await this.dataSync.sendMessage({handler:"delete",args:s})}getEnv(){return{token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version,tabId:s.Z}}buildQueryString(...e){const t=e.reduce(((e,t)=>({...t,...e})),{}),a=new URLSearchParams(t).toString();return a?"?"+a:""}}},67652:(e,t,a)=>{var s;a.d(t,{Z:()=>o}),function(e){e.Sync="sync",e.Cache="cache",e.Server="server",e.Timestamp="timestamp"}(s||(s={}));const o=s}}]);