(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[5482,3578],{83578:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var i=a(20144),o=a(88026),n=a(51726),s=a.n(n),r=a(55482),d=a(7838),c=a(35174);let u={};const l={bind:function(e,t){m.utils.isTouchDevice()&&(e.dataset.justBoundMobileClickHandler=!0,setTimeout((()=>{e.dataset.justBoundMobileClickHandler=!1}),100),e.dataset.mobileClickHandlerId=Math.random().toString(36).substring(7),u[e.dataset.mobileClickHandlerId]=t.value,e.addEventListener("click",t.value))},unbind:function(e){m.utils.isTouchDevice()&&(e.removeEventListener("click",u[e.dataset.mobileClickHandlerId]),delete u[e.dataset.mobileClickHandlerId],delete e.dataset.mobileClickHandlerId,delete e.dataset.justBoundMobileClickHandler)}};let g={};const v={bind:function(e,t){let a,i;e.dataset.justBoundClickOutsideHandler=!0,setTimeout((()=>{e.dataset.justBoundClickOutsideHandler=!1}),100);const o=e=>{i=!1,(e=>e&&e.clientX>window.innerWidth)(e)?i=!0:a=e.target},n=o=>{i||(t.modifiers.bubble||!e.contains(a)&&!e.contains(o.target)&&e!==a&&e!==o.target&&"true"!==e.dataset.justBoundClickOutsideHandler)&&t.value(o)};e.dataset.clickOutsideMouseupHandlerId=Math.random().toString(36).substring(7),e.dataset.clickOutsideMousedownHandlerId=Math.random().toString(36).substring(7),g[e.dataset.clickOutsideMouseupHandlerId]=n,g[e.dataset.clickOutsideMousedownHandlerId]=o,document.addEventListener("mouseup",n),document.addEventListener("mousedown",o)},unbind:function(e){var t,a;null!==(t=e.dataset)&&void 0!==t&&t.clickOutsideMouseupHandlerId&&null!==(a=e.dataset)&&void 0!==a&&a.clickOutsideMousedownHandlerId&&(document.removeEventListener("mouseup",g[e.dataset.clickOutsideMouseupHandlerId]),document.removeEventListener("mousedown",g[e.dataset.clickOutsideMousedownHandlerId]),delete g[e.dataset.clickOutsideMouseupHandlerId],delete g[e.dataset.clickOutsideMousedownHandlerId],delete e.dataset.clickOutsideMouseupHandlerId,delete e.dataset.clickOutsideMousedownHandlerId,delete e.dataset.justBoundClickOutsideHandler)}};var f=a(94130),b=a(77197),h=a(72433);i.ZP.use(o.Z,{name:"unreactive"}),i.ZP.use(s()),i.ZP.use(r.qK),i.ZP.use(b.Z),i.ZP.use(h.ZP),i.ZP.use(f.Z),i.ZP.prototype.$xhr=c.Z,i.ZP.prototype.$e=d.Z,i.ZP.directive("mobile-click",l),i.ZP.directive("click-outside",v),new i.ZP({bb:()=>({conditionalFeatures:m.conditionalFeatures,teamInfo:m.models.teamInfo,date:m.models.date,balance:m.models.balanceMode,bookmarksSettings:m.models.bookmarksSettings})}),i.ZP.mixin({unreactive:()=>({$touch:m.utils.isTouchDevice()}),computed:{$mobile:()=>m.reactive.windowDimensions.width<=450,$plus:()=>m.conditionalFeatures.featureEnabled("plus"),$team:()=>m.conditionalFeatures.featureEnabled("team"),$admin:()=>m.models.teamInfo&&m.models.teamInfo.get("team")&&m.models.teamInfo.get("team").userIsAdmin},pinia:f.Z});const p=i.ZP},10239:(e,t,a)=>{"use strict";a.r(t);var i=a(83578),o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"backgrounds"},[t("div",{staticClass:"background"},[t("transition",{attrs:{name:e.transitionSpeed,mode:"in-out"}},[t("div",{key:e.imageUrl,staticClass:"background-item",style:{"background-image":"url("+e.imageUrl+")"},attrs:{"data-test":"background-item"}})])],1),e._v(" "),t("div",{staticClass:"background-overlay"})])};o._withStripped=!0;var n=a(69385),s=a(78871),r=a(20144);const d={name:"Background",setup:()=>({focusModeViewStateStore:(0,n.default)()}),data:()=>({imageUrl:"",transitionSpeed:"fade",loadingImage:!1}),computed:{imagePseudoElementContent(){return this.focusModeViewStateStore.backgroundBlurLayerVisible?'""':void 0},transitionDuration(){return this.focusModeViewStateStore.backgroundTransitionDuration?this.focusModeViewStateStore.backgroundTransitionDuration+"ms":"var(--a-show-full-duration)"}},created(){m.models.activeBackground.on("background:activeChanged",this.setBackground),m.on("image:loaded",this.imageLoaded),m.on("image:error",this.imageError),m.on("image:timeout",this.imageTimeout),m.on("topics:open",this.addOverlay),m.on("topics:closed",this.removeOverlay),m.models.backgroundManager.backgroundItem?this.setBackground(m.models.backgroundManager.backgroundItem):m.models.activeBackground.backgroundItem&&this.setBackground(m.models.activeBackground.backgroundItem)},destroyed(){m.models.activeBackground.off("background:activeChanged",this.setBackground),m.off("image:loaded",this.imageLoaded),m.off("image:error",this.imageError),m.off("image:timeout",this.imageTimeout),m.off("topics:open",this.addOverlay),m.off("topics:closed",this.removeOverlay)},methods:{setBackground(e){this.loadingImage=!0,this.imageUrl&&(this.transitionSpeed="fade-slow");const t=e.get("isBuiltIn"),a=e.backgroundUuid(),i=e.get("filename");"true"==localStorage.getItem("failed:"+i)&&m.models.activeBackground.trigger("background:fallback");const o={uuid:a,url:i,height:e.get("height"),width:e.get("width"),skip_check:e.get("skip_check")};m.models.imageManager.loadImage(o,t||this.isBackgroundLoaded?null:4e3,!1)||(this.isBackgroundLoaded?m.trigger("background:error",a):m.models.activeBackground.trigger("background:fallback"))},imageLoaded(e,t,a,i){i||(m.models.activeBackground.successfullyLoaded(e),this.isBackgroundLoaded=!0,this.loadingImage=!1,this.imageUrl=t,m.widgetManager.appReady("background",s.Z.oneTimeLoginInProgress),s.Z.oneTimeLoginInProgress||setTimeout(m.widgetManager.checkWidgetTimeout.bind(m.widgetManager),500),m.trigger("background:loadSuccessful",e))},imageError(e){this.loadingImage?m.models.activeBackground.trigger("background:fallback"):m.trigger("background:error",e)},imageTimeout(){this.loadingImage&&m.models.activeBackground.trigger("background:fallback")},addOverlay(){m.utils.addClass(document.body,"show-full-overlay"),this.$nextTick((()=>{m.utils.addClass(document.body,"show-full-overlay-active")}))},removeOverlay(){m.utils.removeClass(document.body,"show-full-overlay-active"),this.$nextTick((()=>{m.utils.removeClass(document.body,"show-full-overlay")}))}}},c=()=>{(0,r.sj)(((e,t)=>({"14ae2ceb":e.transitionDuration,"72fb97fc":e.focusModeViewStateStore.backgroundScale,"71e9d014":e.imagePseudoElementContent,"31f71d8f":e.focusModeViewStateStore.backgroundBlurLayerOpacity})))},u=d.setup;d.setup=u?(e,t)=>(c(),u(e,t)):c;const l=d;a(65208);const g=(0,a(51900).Z)(l,o,[],!1,null,"5f354283",null).exports;new i.Z({render:e=>e(g)}).$mount(".backgrounds")},35913:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var i=a(8081),o=a.n(i),n=a(23645),s=a.n(n),r=a(61667),d=a.n(r),c=new URL(a(95304),a.b),u=s()(o()),l=d()(c);u.push([e.id,`\n/* stylelint-disable */\n.background[data-v-5f354283], .background-item[data-v-5f354283] { position: absolute; top: 0; right: 0; left: 0; bottom: 0; background-color: transparent; background-position: center center; background-repeat: no-repeat; background-size: cover;\n}\n.background[data-v-5f354283] { margin: 0; padding: 0; z-index: 1; transition: transform 0.3s ease-out;\n}\n.background-item[data-v-5f354283] { opacity: 1; transition: var(--14ae2ceb) var(--a-show-full-curve); transform: scale(var(--72fb97fc)); transform-origin: center center;\n}\n.background-item[data-v-5f354283]::after { content: var(--71e9d014); position: absolute; inset: 0; background: inherit; transition: inherit; filter: blur(15px); opacity: var(--31f71d8f);\n}\n.show-full-overlay-active .background-item[data-v-5f354283] { transform: scale(1.05);\n}\n.show-full-overlay .background-item[data-v-5f354283]:before { position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 0; opacity: 0; background: rgba(0,0,0,0.5); content: ''; transition: opacity var(--a-show-full-duration) var(--a-show-full-curve);\n}\n.show-full-overlay-active .background-item[data-v-5f354283]:before { opacity: 1;\n}\n.background-overlay[data-v-5f354283] { position: fixed; top: 0; right: 0; bottom: 0; left: 0; z-index: 2; opacity: 1; background-image: url(${l}); background-size: 100% 100%; transition: opacity 0.3s ease-out;\n}\n.background-overlay.slow[data-v-5f354283] { transition-duration: 1s;\n}\n.hide-overlay .background-overlay[data-v-5f354283] { opacity: 0 !important;\n}\n.fade-enter-active[data-v-5f354283], .fade-leave-active[data-v-5f354283] { animation: fadein 0.3s ease-out 0s forwards;\n}\n.fade-enter[data-v-5f354283], .fade-leave-to[data-v-5f354283] { opacity: 0;\n}\n.fade-slow-enter-active[data-v-5f354283], .fade-slow-leave-active[data-v-5f354283] { animation: fadein 2s ease-out 0s forwards;\n}\n.fade-slow-enter[data-v-5f354283], .fade-slow-leave-to[data-v-5f354283] { opacity: 0;\n}\n`,""]);const m=u},61667:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},69385:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u,useFocusModeViewStateStore:()=>c});var i=a(63420),o=a(95756),n=a(70237),s=a(54046),r=a(66383);const d=(0,o.vM)("focusModeDash",{views:{[s.VQ.Idle]:{beforeLeave:async e=>{e===s.VQ.Transition?(m.widgetManager.hideApps({layer:"focusMode"}),await n.Z.delay(s.mQ),(0,r.xk)()):e===s.VQ.Focusing&&(m.widgetManager.hideApps({layer:"focusMode"}),(0,r.xk)(),n.Z.delay(s.mQ).then((()=>{(0,r.cc)()})))},defaultView:!0},[s.VQ.Transition]:{beforeLeave:()=>{n.Z.delay(s.mQ).then((()=>{(0,r.cc)()}))}},[s.VQ.Focusing]:{beforeLeave:e=>{(0,r.LA)(),n.Z.delay(s.mQ).then((()=>{(0,r.dU)(),e===s.VQ.Idle&&m.widgetManager.showApps({layer:"focusMode"})}))}},[s.VQ.Celebration]:{beforeLeave:()=>{n.Z.delay(s.mQ).then((()=>{m.widgetManager.showApps({layer:"focusMode"})}))}}}})(),c=(0,o.t7)("focusMode",{extend:(e,t)=>(0,i.Q_)(t,{state:()=>({backgroundScale:1,backgroundBlurLayerOpacity:0,backgroundTransitionDuration:0}),getters:{currentFocusModeView:()=>d.activeViewId,currentlyFocusing(){return this.currentFocusModeView===s.VQ.Focusing},backgroundBlurLayerVisible(){return this.currentFocusModeView!==s.VQ.Idle}},actions:{async startFocusMode(){e.popupActive=!1,await d.setActiveView(s.VQ.Transition),this.backgroundTransitionDuration=s.sk,await n.Z.doubleRaf(),this.setFocusingStyleVariables(),await n.Z.delay(this.backgroundTransitionDuration),this.backgroundTransitionDuration=0},async celebrateFocusMode(){e.popupActive=!1,await d.setActiveView(s.VQ.Celebration),this.backgroundTransitionDuration=1500,await n.Z.doubleRaf(),this.resetFocusingStyleVariables(),await n.Z.delay(this.backgroundTransitionDuration),this.backgroundTransitionDuration=0,await n.Z.delay(s._d-1500)},async stopFocusMode(){e.popupActive=!1,this.resetFocusingStyleVariables(),await d.setActiveView(s.VQ.Idle)},setFocusingStyleVariables(){this.backgroundScale=1.1,this.backgroundBlurLayerOpacity=1},resetFocusingStyleVariables(){this.backgroundScale=1,this.backgroundBlurLayerOpacity=0},async resumeFocusModeAfterTabLoad(){await d.setActiveView(s.VQ.Focusing),await("visible"===document.visibilityState?n.Z.doubleRaf():n.Z.delay(0)),this.setFocusingStyleVariables()}}})}),u=c},78871:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var i=a(35174),o=a(36664);const n=new class{constructor(){this.oneTimeLoginInProgress=!1}startOneTimeLogin(){var e;this.oneTimeLoginInProgress=!0;const t=Date.now(),a=Number(null!==(e=localStorage.getItem("oneTimeLoginStarted"))&&void 0!==e?e:0);if(a&&a>t-1e4)throw new Error("Another login is currently being processed.");localStorage.setItem("oneTimeLoginStarted",String(t))}finalizeOneTimeLogin(){this.oneTimeLoginInProgress=!1}async loginWithOneTimeLoginResponse(e){try{await o.Z.onSuccessfulAuthResponse(e,{keepPreviousUserData:!!e.legacy,migrateLegacy:!!e.legacy})}catch(e){throw await chrome.runtime.sendMessage({type:"oneTimeLogin:response",payload:{success:!1,errorMessage:e}}),e}finally{localStorage.removeItem("oneTimeLoginStarted")}}async redeemOnetimePassword(e){const{otp:t,otpUuid:a,email:o,...n}=e,s={type:"oneTimeLogin",payload:{otp:t,otpUuid:a,email:o},openNewTab:!0,updateSenderTab:!1};return{...(await i.Z.post("user/authenticate",s)).data,...n,email:o}}}},95756:(e,t,a)=>{"use strict";a.d(t,{t7:()=>l,vM:()=>u});var i=a(63420),o=a(20144),n=a(96046),s=a(63139),r=a(7838),d=a(70237);const c=e=>Object.keys(e).find((t=>{var a;return null===(a=e[t])||void 0===a?void 0:a.defaultView})),u=(e,{views:t}={})=>{const a=(0,i.Q_)(e+"ViewState",{state:()=>{var a;return{activeViewId:null!==(a=t&&c(t))&&void 0!==a?a:"",beforeViewChange:()=>Promise.resolve(!0),confirmationProps:null,popupActive:!1,name:e}},getters:{activeView(e){if(!t)return null;const a=t[e.activeViewId];if(a)return a;throw new Error("No view found with id: "+e.activeViewId)},focused:()=>s.Z.isOnTop(e)},actions:{focus(){s.Z.add(e)},async setActiveView(e){var a,i;if(!t||!await this.beforeViewChange())return;let o=e;if("default"===e){const e=c(t);if(!e)throw new Error("No view found with defaultView: true");o=e}await(null===(i=null===(a=this.activeView)||void 0===a?void 0:a.beforeLeave)||void 0===i?void 0:i.call(a,o)),this.activeViewId=o},async togglePopup(e,{resetActiveView:t=!0}={}){await this.beforeViewChange()&&(await o.ZP.nextTick(),this.popupActive=null!=e?e:!this.popupActive,!this.popupActive&&t&&(this.resetBeforeViewChange(),this.confirmationProps=null,await this.setActiveView("default")))},resetBeforeViewChange(){this.beforeViewChange=()=>Promise.resolve(!0)},async setConfirmation(e){return new Promise((t=>{this.confirmationProps=e,this.confirmationProps.confirm=()=>t(!0),this.confirmationProps.cancel=()=>t(!1)})).finally((()=>{this.confirmationProps=null}))}}}),d=(0,i.Jk)(a());return r.Z.$on(e+":close",(()=>a().togglePopup(!1))),(0,o.YP)(d.popupActive,(t=>{t?s.Z.add(e):s.Z.remove(e)})),(0,o.YP)(d.confirmationProps,(t=>{(null==t?void 0:t.dashboardOverlay)&&s.Z.add(e,!0),n.Z.dashboardOverlayActive=!!(null==t?void 0:t.dashboardOverlay)})),a},l=(e,{views:t,extend:a})=>{const i=u(`base${d.Z.capitalizeFirstLetter(e)}`,{views:t}),o=a(i(),`extended${d.Z.capitalizeFirstLetter(e)}ViewState`);return m(`${e}ViewState`,i,o)},m=(e,t,a)=>{const n=t(),s=a();return(0,i.Q_)(e,(()=>({...(0,o.BK)(n),...(0,o.BK)(s)})))}},67652:(e,t,a)=>{"use strict";var i;a.d(t,{Z:()=>o}),function(e){e.Sync="sync",e.Cache="cache",e.Server="server",e.Timestamp="timestamp"}(i||(i={}));const o=i},65208:(e,t,a)=>{var i=a(35913);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[e.id,i,""]]),i.locals&&(e.exports=i.locals),(0,a(45346).Z)("5d2eab4a",i,!1,{ssrId:!0})},95304:(e,t,a)=>{"use strict";e.exports=a.p+"26068490522b9f5ca27a.png"}}]);