"use strict";(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[6113,4145],{78025:(e,t,s)=>{s.d(t,{cw:()=>h,dZ:()=>r,ll:()=>n,nW:()=>d,vt:()=>a});var i=s(24749);function r(e){return e.type===i.Un.LinkGroup&&!e.isRoot}function a(e){return e.type===i.Un.Legacy}function n(e){return e.type===i.Un.Link}function h(e){return e.type===i.Un.LinkGroup&&"isRoot"in e&&e.isRoot&&!("isTeamRoot"in e&&e.isTeamRoot)}function d(e){return e.type===i.Un.LinkGroup&&"isTeamRoot"in e&&e.isTeamRoot}},25038:(e,t,s)=>{s.d(t,{G:()=>d,r:()=>h});var i=s(89608),r=s(70237),a=s(25786),n=s(24749);class h{constructor({id:e=(0,a.uuidv4)(),url:t=""}={}){this.id=e,this.url=t}}function d({url:e},t){const s="links"+(void 0===t?"":`.${t}`);if(!e)throw new i.B({message:n.XO.URL_EMPTY,input:s});if(!r.Z.isValidUrl(e))throw new i.B({message:n.XO.URL_INVALID,input:s})}},41661:(e,t,s)=>{s.d(t,{G:()=>d,p:()=>h});var i=s(89608),r=s(25038),a=s(24749),n=s(70237);class h{constructor({id:e=n.Z.uuidv4(),links:t=[],title:s="",pinned:i=!1,readOnly:a=!1}={}){this.id=e,this.links=t.map((e=>new r.r(e))),this.title=s,this.pinned=!!i,this.readOnly=a}get hasManyLinks(){return this.links.length>1}}function d({title:e,links:t}){if(0===e.length)throw new i.B({message:a.XO.TITLE_EMPTY,input:"title"});if(0===t.length)throw new i.B({message:a.XO.URL_EMPTY,input:"links.0"});t.forEach(((e,s)=>{(e.url||1===t.length)&&(0,r.G)(e,s)}))}},96380:(e,t,s)=>{s.d(t,{km:()=>o,m0:()=>d,wc:()=>p});var i=s(78025),r=s(24749),a=s(41661),n=s(25038),h=s(48626);class d{constructor(e){this.dataService=e}get(e){this.dataService.get({...e,success:t=>{(async()=>{var s;1===t.filter(i.cw).length?e.success(t):0!==(null===(s=await h.Z.get("links"))||void 0===s?void 0:s.cache)&&(await h.Z.patch("links",{cache:0}),this.dataService.get(e))})()}})}create(e){return this.dataService.create(e.id,e)}update(e,t){return this.dataService.update(e,t)}delete(e){return this.dataService.delete(e)}}function o(e){return[{id:e.id,title:e.title,pinned:e.pinned,type:r.Un.LinkGroup,readOnly:!1,linksOrderIds:e.links.map((e=>e.id))},...e.links.map((t=>({id:t.id,type:r.Un.Link,url:t.url,parentLinkId:e.id})))]}function p(e){const t=Object.assign(new a.p,e);return t.links=t.links.filter((e=>e.url.length)).map((e=>Object.assign(new n.r,e,{url:e.url.includes("://")?e.url:"https://"+e.url}))),t}},34145:(e,t,s)=>{s.d(t,{U:()=>h});var i=s(42935),r=s(24960),a=s(67652),n=s(35597);class h{constructor(e,{queryParams:t={},getResponseProperty:s,path:i="",mode:n=a.Z.Sync}={}){this.type=e,this.queryParams=t,this.getResponseProperty=s,this.path=i,this.mode=n,this.dataSync=r.Z}get({id:e,path:t=this.path||this.type,mode:s=this.mode,success:i,failure:r,queryParams:h={},retry:d,responseProperty:o=this.getResponseProperty,appendIdToPath:p,timestampKey:u=this.type}){(async()=>{var c;s===a.Z.Timestamp&&(s=await n.Z.requiresSync(u)?a.Z.Sync:a.Z.Cache,n.Z.addUpdateListener(u,this.refresh.bind(this,{id:e,path:t,queryParams:h,retry:d,responseProperty:o,appendIdToPath:p,timestampKey:u}))),t+=this.buildQueryString((null===(c=this.queryParams)||void 0===c?void 0:c.get)||{},h);const l=[this.type,{id:e,path:t,env:this.getEnv(),mode:s,retry:d,responseProperty:o,appendIdToPath:p,timestampKey:u}];s===a.Z.Server?this.dataSync.sendMessage({handler:"get",args:l}).then(i).catch(r):this.dataSync.sendRecurringCrossTabMessage({msgId:`${this.type}${e?`:${e}`:""}:refreshed`,handler:"get",args:l,success:i,failure:r})})()}refresh({id:e,path:t=this.path||this.type,queryParams:s={},retry:i,responseProperty:r=this.getResponseProperty,appendIdToPath:n,timestampKey:h=this.type}={}){return new Promise(((d,o)=>this.get({id:e,mode:a.Z.Server,path:t,queryParams:s,retry:i,success:d,failure:o,responseProperty:r,appendIdToPath:n,timestampKey:h})))}async create(e,t,{path:s=this.path||this.type,mode:i=this.mode}={}){const r=[this.type,e,t];r.push({path:s,mode:i,env:this.getEnv()}),await this.dataSync.sendMessage({handler:"create",args:r})}async update(e,t,{path:s=this.path||this.type,mode:i=this.mode,queryParams:r={},appendIdToPath:a}={}){var n;const h=this.buildQueryString((null===(n=this.queryParams)||void 0===n?void 0:n.update)||{},r),d=[this.type,e,t];d.push({path:s,mode:i,env:this.getEnv(),queryString:h,appendIdToPath:a}),await this.dataSync.sendMessage({handler:"update",args:d})}async delete(e,{path:t=this.path||this.type,mode:s=this.mode}={}){const i=[this.type,e];i.push({path:t,mode:s,env:this.getEnv()}),await this.dataSync.sendMessage({handler:"delete",args:i})}getEnv(){return{token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version,tabId:i.Z}}buildQueryString(...e){const t=e.reduce(((e,t)=>({...t,...e})),{}),s=new URLSearchParams(t).toString();return s?"?"+s:""}}},67652:(e,t,s)=>{var i;s.d(t,{Z:()=>r}),function(e){e.Sync="sync",e.Cache="cache",e.Server="server",e.Timestamp="timestamp"}(i||(i={}));const r=i}}]);