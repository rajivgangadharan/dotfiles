(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[2349,4145,9385,5346,7314],{48494:(e,t,o)=>{"use strict";function a({useViewStateStore:e,analytics:t}={}){return{computed:{popupActive(){return this.viewStateStore.popupActive}},unreactive(){const o={};return e&&(o.viewStateStore=e()),t&&(o.capture=t.capture.bind(t)),t&&(o.batchCapture=t.batchCapture),o},methods:{async togglePopupAndCaptureIfOpen(e){if(await this.togglePopup(),this.popupActive){const t=e instanceof KeyboardEvent?"hotkey":"click";this.capture("app show",{source:t})}},closePopup(){this.viewStateStore.togglePopup(!1)},async togglePopup(e){const t="boolean"!=typeof e;t&&this.popupActive&&!this.viewStateStore.focused?this.viewStateStore.focus():await this.viewStateStore.togglePopup(t?void 0:e)}},provide:()=>({capture:t.capture.bind(t),batchCapture:t.batchCapture})}}o.d(t,{Z:()=>a})},27314:(e,t,o)=>{"use strict";o.r(t),o.d(t,{scenes:()=>s});const a={fire:{uuid:"32E55A2C-218E-452C-99A5-F377E820B34D",name:"Fire",icon:o(63366),url:"https://az814671.vo.msecnd.net/blogimages/276f1472-734e-492c-9138-c1584fb6cd80"},crickets:{uuid:"877124D8-4BE5-40D2-9C1B-966403D34D7C",name:"Crickets",icon:o(92909),url:"https://az814671.vo.msecnd.net/blogimages/7969c39a-f659-40e3-a357-11060161ce74"},ocean:{uuid:"A912DBAB-5C9C-4C7C-8178-51AB5B6BC66E",name:"Ocean",icon:o(2353),url:"https://az814671.vo.msecnd.net/blogimages/3f851f30-5854-4fdb-805a-3f302ba56a81"},wind:{uuid:"98428CC-4225-4622-8916-0841A3886460",name:"Wind",icon:o(27093),url:"https://az814671.vo.msecnd.net/blogimages/ebcb630e-5cb3-4a64-a2d4-eec16c9abf41"},seagulls:{uuid:"92AED14F-BE35-45E5-ADBD-B38F8C548699",name:"Seagulls",icon:o(98324),url:"https://az814671.vo.msecnd.net/blogimages/c0b4e5c6-ab66-42ce-aea3-5d6a419583cb"},tracks:{uuid:"D6EE305A-2EBF-4119-9A0A-71D09946E621",name:"Tracks",icon:o(93762),url:"https://az814671.vo.msecnd.net/blogimages/38228a91-cfa9-45b1-ada9-c16b619c2568"},rainOnSurface:{uuid:"8C65E875-1AA4-43C5-A140-0392E45741B8",name:"Rain on surface",icon:o(68935),url:"https://az814671.vo.msecnd.net/blogimages/08e95b57-7dbe-4ba8-83a7-8b19fc254ae1"},rain:{uuid:"1D63CBB9-FC3F-4B06-9281-EC463451C0AF",name:"Rain",icon:o(29539),url:"https://az814671.vo.msecnd.net/blogimages/eac6cdc4-1f53-4fc5-92dd-0a4c053de028"},birds:{uuid:"CC4EA0EB-9DF2-4F55-BE24-6D519CB36CF1",name:"Birds",icon:o(74214),url:"https://az814671.vo.msecnd.net/blogimages/84d9d4e7-1d54-4300-a347-8f2650eafd51"},insects:{uuid:"9126E055-07E3-44E3-AD18-7CD1E6420609",name:"Insects",icon:o(34733),url:"https://az814671.vo.msecnd.net/blogimages/5875d483-396c-4bfe-a5d4-160384c18832"},chimes:{uuid:"E7019F40-9C4D-4B58-A2C6-B4FF2831E6DE",name:"Chimes",icon:o(21811),url:"https://az814671.vo.msecnd.net/blogimages/c30b03c9-91e0-43ce-9aa9-199e7aa0b76a"},cafe:{uuid:"3A188244-471F-41BF-9CF3-C700C2153C6D",name:"Café",icon:o(93692),url:"https://az814671.vo.msecnd.net/blogimages/6f8cf03d-c7f2-45b7-898d-576385236122"},coffeeMaker:{uuid:"86A2C11A-1A74-4832-AE1F-1A7CB4C0A970",name:"Coffee Maker",icon:o(75047),url:"https://az814671.vo.msecnd.net/blogimages/43769f50-e91e-4595-91b4-8248372f39d2"},thunder:{uuid:"D19ECB22-814B-4504-A51D-A056B79BA8E7",name:"Thunder",icon:o(6836),url:"https://az814671.vo.msecnd.net/blogimages/8291e604-c11a-4b45-b844-2e464527a2e1"},loudRain:{uuid:"581EA3E4-5FD1-485D-8337-F6B1EF9BDB16",name:"Loud Rain",icon:o(98152),url:"https://az814671.vo.msecnd.net/blogimages/31fca0bf-8792-458f-8c13-f605b5618275"},stream:{uuid:"8DAFC567-C77A-479A-8873-450914531283",name:"Stream",icon:o(14789),url:"https://az814671.vo.msecnd.net/blogimages/2374f3af-35fd-4ab8-96c3-5e70775ca33a"},coWorkers:{uuid:"EA463EB3-E751-49A9-B1AC-565F2D87194F",name:"Co-workers",icon:o(8740),url:"https://az814671.vo.msecnd.net/blogimages/7a5fc995-0278-4386-bf30-b5672dfdd95b"},copier:{uuid:"6492F3E6-6517-46EF-B211-AE02E905FDB2",name:"Copier",icon:o(39415),url:"https://az814671.vo.msecnd.net/blogimages/3e1f826c-dca2-4fe7-a10f-bf07c56ecfa8"},airConditioner:{uuid:"F88D0945-3DBB-456D-8CF5-812745566F2E",name:"Air Conditioner",icon:o(74101),url:"https://az814671.vo.msecnd.net/blogimages/e55e01b5-6fe8-43b3-b50b-18ce4f670472"},fluorescentHum:{uuid:"B3FC885D-06BB-4531-9699-F4EA73894AFB",name:"Fluorescent Hum",icon:o(33577),url:"https://az814671.vo.msecnd.net/blogimages/58fdb1ba-8821-4abe-8daf-704ee656e369"},mechanicalKeyboard:{uuid:"17718B1A-A842-4CDA-844F-BC2AC9E7ADD5",name:"Mechanical Keyboard",icon:o(48376),url:"https://az814671.vo.msecnd.net/blogimages/f295aec4-9d59-47b2-b31a-ba88f23d4628"}};Object.values(a).forEach((e=>e.volume=0));const s=[{name:"Campfire",icon:o(47696),tracks:[{...a.fire,volume:90},{...a.crickets,volume:2}]},{name:"Beach",icon:o(2455),tracks:[{...a.ocean,volume:50},{...a.wind,volume:15},{...a.seagulls,volume:5}]},{name:"Train",icon:o(99332),tracks:[{...a.tracks,volume:90},{...a.wind,volume:10}]},{name:"Rainfall",icon:o(13061),tracks:[{...a.rainOnSurface,volume:50},{...a.rain,volume:50}]},{name:"Forest",icon:o(77660),tracks:[{...a.birds,volume:75},{...a.wind,volume:10},{...a.insects,volume:5}]},{name:"Garden",icon:o(4762),tracks:[{...a.chimes,volume:50},{...a.insects,volume:1},{...a.wind,volume:10}]},{name:"Café",icon:o(11711),tracks:[{...a.cafe,volume:50},{...a.coffeeMaker,volume:55}]},{name:"Thunderstorm",icon:o(8533),tracks:[{...a.thunder,volume:90},{...a.loudRain,volume:55},{...a.wind,volume:45},{...a.rain,volume:25}]},{name:"Creek",icon:o(54812),tracks:[{...a.stream,volume:20},{...a.wind,volume:10}]},{name:"Office",icon:o(45534),tracks:[{...a.coWorkers,volume:13},{...a.copier,volume:8},{...a.airConditioner,volume:7},{...a.fluorescentHum,volume:3},{...a.mechanicalKeyboard,volume:1}]},{name:"Random",icon:o(12046)},{name:"Custom",icon:o(56248),tracks:Object.values(a)}]},87663:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var a=o(8081),s=o.n(a),i=o(23645),n=o.n(i)()(s());n.push([e.id,".app-dash[data-v-fe15987a]{white-space:nowrap}",""]);const r=n},22003:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>r});var a=o(8081),s=o.n(a),i=o(23645),n=o.n(i)()(s());n.push([e.id,'.app-container[data-v-deaa131a]{order:4}.app-dash-icon[data-v-deaa131a]{pointer-events:all}.focus-mode[data-v-deaa131a]{transition:top .2s ease,var(--app-container-transition)}.focus-mode .click-target[data-v-deaa131a]{display:flex;align-items:center;pointer-events:none}.focus-mode .click-target>.focus-icon[data-v-deaa131a]{--icon-size: 36px;--color-icon: var(--color-stop-4);padding:8px;transition:var(--a-default);cursor:pointer;pointer-events:all}.focus-mode .click-target>.text[data-v-deaa131a]{padding:8px 8px 8px 0;transition:var(--a-default);color:var(--color-stop-4);font-size:.875rem;font-weight:700;text-transform:uppercase;cursor:pointer;pointer-events:all}.focus-mode .ellipsis[data-v-deaa131a]{--icon-size: 15px;--color-icon: var(--color-stop-4);position:relative;margin:-5px;color:var(--color-icon);cursor:pointer;pointer-events:all}.focus-mode .ellipsis[data-v-deaa131a]::before{content:"";position:absolute;border-radius:100%;inset:-5px}.focus-mode .ellipsis[data-v-deaa131a]:hover::before{background-color:var(--color-stop-2)}.focus-mode .click-target:hover>.text[data-v-deaa131a],.focus-mode .click-target:hover>.focus-icon[data-v-deaa131a],.focus-mode .click-target:hover .ellipsis[data-v-deaa131a]{--color-icon: var(--color-stop-6);color:var(--color-stop-6)}.focus-mode.popup-active .click-target>.focus-icon[data-v-deaa131a],.focus-mode.popup-active .click-target>.text[data-v-deaa131a],.focus-mode.popup-active .click-target .ellipsis[data-v-deaa131a]{--color-icon: var(--color-stop-6);color:var(--color-stop-6)}.focus-mode.popup-active .click-target .ellipsis[data-v-deaa131a]::before{background-color:var(--color-stop-2)}.focus-mode.focusing[data-v-deaa131a]{height:40px;display:flex;position:absolute;z-index:1;align-items:center;justify-content:center;padding:5px 0;inset:0}.focus-mode.focusing .icon-container[data-v-deaa131a]{position:relative;padding:25px 10px}',""]);const r=n},54046:(e,t,o)=>{"use strict";var a;o.d(t,{BD:()=>r,Le:()=>u,P7:()=>m,Tt:()=>c,VQ:()=>a,_d:()=>n,c:()=>h,cb:()=>d,ie:()=>s,mQ:()=>i,oF:()=>l,sk:()=>p}),function(e){e.Idle="idle",e.Transition="transition",e.Focusing="focusing",e.Celebration="celebration"}(a||(a={}));const s="Focus Mode ended due to inactivity.",i=500,n=4e3,r=["tabs","soundscapes","notes","focus-mode","focus-mode-app","pomodoro","pomodoro-settings","focus","clock","greeting","mantra","focus","big-search","launchpad","links"],c=".todo, .settings",d="soundscapes:shoudResumeOnReload",u=36e5,l=108e5,p=4500,m=["I am centered and focused on my next task","Deep focus is the key to meaningful work","I'm focused on my most meaningful work","Deep work leads to mindful productivity ","I'm connected to my why and focused on the next step","I choose to focus to create my best work","I'm moving forward on what matters","Focus is the key to satisfying work","Distractions have no power over me","Unstoppable focus powers success","I'll let distracting thoughts float away","This is my intentional work time","This is my mindful productivity time","This is my time to access flow state","This is my time for deep work","This is my time to move toward my why","This is my time to complete important tasks","I will take on each task one at a time","I give myself permission to focus on only one thing","This is my time to take action on essential tasks","Block out everything but your next task","I give myself permission to zone in and ignore distractions","I claim this time to focus on what matters","I am connected to my purpose","I am connected to the bigger vision","Focus is my superpower","Deep work is my superpower","Now is the time to tune out the world and focus","Now is the time to move toward my goals","Now is the time to take the next step","Now is the time to move on what matters","I am an unstoppable force of focus","I commit to mindful productivity","Narrow your focus for extraordinary results.","I give my undivided attention to what matters most.","“Until my ONE Thing is done — everything else is a distraction.” - Gary Keller",'"Multitasking is a lie" - Gary Keller',"With undivided attention, I can get it done.","The time I invest with 100% focus yields the most success.","I'm honoring what's important with undivided attention.","I will reach the next milestone with 100% focus.","With practice, I can cultivate lasting deep focus.","I give the best I have to the task at hand.","I am focused on a single direction and one task at a time.","Ignore everything but your most essential task.","One focused step every day creates extraordinary results.","“Focus is a matter of deciding what things you’re not going to do.” —John Carmack","I dedicate my willpower to accomplish one task.","My purpose guides my focus.","My ritual for success is deep work."],h=["Well done! Each moment of deep focus helps you build a stronger, more resilient mind.","Incredible work! Your focus muscle is getting stronger, paving the way to a brighter reality.","Bravo! With each focus session, you're expanding your mental capacity for greatness.","Just as muscles get stronger, your capacity for deep work expands with every effort. Keep building!","Because of your efforts today, Future You has a greater capacity for deep focus. Well done!","Way to go! Your deeper focus today is the foundation for a more fulfilling future.","You're limitless. Deep focus is making your vision more achievable than ever before."]},65228:(e,t,o)=>{"use strict";o.d(t,{apps:()=>l});var a=o(20144),s=o(68122),i=o(70237),n=o(40531),r=o(27314),c=o(54046),d=o(7838);const u=()=>{localStorage.setItem(c.cb,Date.now().toString())},l={pomodoro:{icon:"icon/pomodoro",name:"Pomodoro",description:"Timed focus and rest intervals",enable:()=>(m.trigger("centerBelow:show",!1),localStorage.removeItem("pomodoro-started"),localStorage.removeItem("pomodoro-time-remaining"),(async()=>{"true"===localStorage.getItem("pomodoro-showing")?await i.Z.delay(2*c.mQ):await new Promise((e=>m.on("pomodoro:created",e))),m.trigger("pomodoro:reset"),"true"!==localStorage.getItem("pomodoro-running")&&m.trigger("pomodoro:togglePlay")})(),!0),disable:()=>{"true"===localStorage.getItem("pomodoro-running")&&m.trigger("pomodoro:togglePlay"),localStorage.removeItem("pomodoro-started"),localStorage.removeItem("pomodoro-time-remaining")}},soundscapes:{icon:"icon/soundscapes",name:"Soundscapes",description:"Background sounds",enable:async e=>{var t,a;const s=(await o.e(6730).then(o.bind(o,16730))).default;d.Z.sendCrossTabMessage("soundscapes:stop"),m.trigger("soundscapes:stop"),m.trigger("soundscapes:togglePopup",!1);let c=null===(a=null===(t=n.wA.focusModeSettings.apps)||void 0===t?void 0:t.soundscapes)||void 0===a?void 0:a.preset;return c&&"Random"!==c||(c=e&&"string"==typeof e?e:i.Z.getRandomItem([...r.scenes.flatMap((e=>"Random"===e.name||"Custom"===e.name?[]:[e.name]))])),m.trigger("soundscapes:play",c),s.globalPlaying||(s.globalPlaying=!0),addEventListener("beforeunload",u),c},disable:()=>{m.trigger("soundscapes:stop"),d.Z.sendCrossTabMessage("soundscapes:stop"),removeEventListener("beforeunload",u),localStorage.removeItem(c.cb)},shouldEnableOnResume:()=>{const e=Number(localStorage.getItem(c.cb));return localStorage.removeItem(c.cb),!!(e&&!isNaN(e)&&e>Date.now()-3e4)},shouldDisableEnableOnSettingChangeWhileFocusing:!0},tabStash:{icon:"icon/tabs",name:"Tab Stash",description:"Hide open tabs & restore later",enable:async()=>{const e=(await s.Z.tabsStore())(),t=await e.stashSession();return!!t&&t.id},disable:async({enableResult:e,inactive:t})=>{var o;if(t)return;const n=(await s.Z.tabsStore())();if(n.loaded&&!n.loading||(await new Promise((e=>{(0,a.YP)((()=>n.loaded),e),n.loading||n.refresh()})),await i.Z.delay(1e3)),m.conditionalFeatures.featureEnabled("plus")||m.conditionalFeatures.featureEnabled("tab-stash-degraded")||(e=null===(o=n.getItems[0])||void 0===o?void 0:o.id),"string"==typeof e){const t=n.getItemById(e);t&&await n.restoreSession(t)}},get unsupported(){return i.Z.isSafari()}}}},70287:(e,t,o)=>{"use strict";o.d(t,{Z:()=>s});var a=o(20144);const s=new class{constructor(e,t){this.localStorageKey=e,this.propertyGetter=(0,a.iH)(null);const o=JSON.parse(localStorage.getItem(e)||"null")||t;this.property=(0,a.iH)(o),(0,a.YP)((()=>this.currentValue),(e=>localStorage.setItem(this.localStorageKey,JSON.stringify(e))))}get currentValue(){return this.propertyGetter.value?this.propertyGetter.value():this.property.value}switchOverToWatchedStoreItem(e){this.propertyGetter.value=e}}("focusMode:activeState",!1)},66383:(e,t,o)=>{"use strict";o.d(t,{LA:()=>u,Tv:()=>p,cc:()=>d,dU:()=>l,xk:()=>c});var a=o(15106),s=o(54046),i=o(40531),n=o(70287),r=o(68122);const c=()=>{const e=i.tJ.focusModeSettings,t={notesVisible:!0,todoVisible:!0,quoteVisible:!1,pomodoroSettingsVisible:!!e.apps.pomodoro.enabled,soundscapesVisible:!!e.apps.soundscapes.enabled,tabsVisible:!!e.apps.tabStash.enabled,focusVisible:!0,centerBelowNavVisible:!1,searchVisible:!1,launchpadVisible:!1,focusModeVisible:!0};(0,a.z)(t)},d=()=>{m.widgetManager.addVueAppExemption(s.BD,"focusMode"),m.widgetManager.addAppExemption(s.Tt,"focusMode")},u=()=>{m.widgetManager.hideApps({layer:"focusMode"}),m.widgetManager.removeVueAppExemption(s.BD,"focusMode"),m.widgetManager.removeAppExemption(s.Tt,"focusMode")},l=()=>{(0,a.z)({soundscapesVisible:!!m.conditionalFeatures.featureEnabled("plus")&&null,tabsVisible:!(!m.conditionalFeatures.featureEnabled("tab-stash-degraded")&&!m.conditionalFeatures.featureEnabled("plus"))&&null,notesVisible:null,todoVisible:null,quoteVisible:null,pomodoroSettingsVisible:null,focusVisible:null,centerBelowNavVisible:null,searchVisible:null,launchpadVisible:null,focusModeVisible:null})},p=async()=>{if(n.Z.currentValue){const e=(await r.Z.focusModeSessionStore())();await e.disableAppsBeforeStop(!1),await e.stopAndSaveFocusMode()}}},52349:(e,t,o)=>{"use strict";o.r(t);var a=o(83578),s=function(){var e=this,t=e._self._c;return t("app-container",{class:{focusing:e.focusingOrCelebrationViewActive,"popup-active":e.popupActive},attrs:{"app-name":"focus-mode","visible-setting":"focusModeVisible","data-test":"focus-mode"}},[t("transition",{attrs:{name:"focus-mode-fade-deep",duration:e.instantFocusingViewTransition?0:300}},[e.focusingOrCelebrationViewActive&&e.showAnyway.includes("focus-mode")?t("focus-mode-focusing-view",{on:{openUpsell:e.openUpsell,stopFocusMode:e.stopFocusMode}}):e._e()],1),e._v(" "),t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closePopup,expression:"closePopup"}],staticClass:"click-target"},[e.focusingOrCelebrationViewActive?[t("inline-svg",{staticClass:"icon focus-icon dark",attrs:{src:o(48100)},on:{click:e.toggleFocusModeApp}}),e._v(" "),t("span",{staticClass:"text dark",on:{click:e.toggleFocusModeApp}},[e._v("Focusing")])]:e._e(),e._v(" "),t("div",{staticClass:"icon-container"},[e.focusingOrCelebrationViewActive?[t("base-icon",{staticClass:"icon dark ellipsis",attrs:{src:"icon-ellipsis","data-test":"focus-mode-top-banner-app-toggle",size:"13px"},on:{click:e.toggleFocusModeApp}})]:[t("app-dash",{attrs:{icon:"icon/apps/focus-mode"+(e.popupActive?"-fill":""),label:"Focus","data-test":"focus-mode-top-left-app-toggle"},on:{mouseenter:e.openHoverDropdown,mouseleave:e.closeHoverDropdown,click:e.toggleAppOrStart}}),e._v(" "),t("transition",{attrs:{name:"slide-down-fade-blurred-app",duration:200}},[e.hoverDropdownOpen?t("focus-mode-hover-dropdown"):e._e()],1)],e._v(" "),t("transition",{attrs:{name:"slide-down-fade"},on:{afterEnter:e.triggerAppOpenEvent}},[e.popupActive?t("focus-mode-app",{on:{close:e.closePopup,start:e.startFocusMode,stop:e.stopFocusMode}}):e._e()],1)],2)],2)],1)};s._withStripped=!0;var i=o(38267),n=o(85346),r=o(47920),c=o(69385),d=o(65228),u=o(54046),l=o(40531),p=o(81405),h=o(20144),g=o(63139),f=o(48494),v=o(96046),y=o(70237),b=o(84820),w=o(30827),S=o(70287);const M=new p.ZP({feature:"focus mode"}),A={name:"FocusMode",components:{AppContainer:i.default,AppDash:r.Z,FocusModeHoverDropdown:()=>Promise.all([o.e(1325),o.e(5848)]).then(o.bind(o,15848)),FocusModeApp:()=>Promise.all([o.e(1325),o.e(6390),o.e(541),o.e(8610),o.e(618),o.e(7735)]).then(o.bind(o,53384)),BaseIcon:b.Z,FocusModeFocusingView:()=>o.e(1125).then(o.bind(o,61125))},mixins:[(0,f.Z)({useViewStateStore:c.useFocusModeViewStateStore,analytics:M})],setup(){const e=(0,c.useFocusModeViewStateStore)(),t=(0,n.useFocusModeSessionStore)();return(0,h.JJ)("store",t),(0,h.JJ)("viewStateStore",e),{apps:d.apps,FocusModeView:u.VQ,focusModeViewStateStore:e,focusModeSessionStore:t,CAPACITY_LIMIT_MS_ALLOWED_PER_DAY:u.Le,showAnyway:w.Z,capacityLimitInterval:null}},data:()=>({hoverDropdownOpen:!1,instantFocusingViewTransition:!1}),computed:{tabFocused:()=>v.Z.tabFocused,activatedApps(){return Object.keys(this.apps).filter((e=>l.wA.focusModeSettings.apps[e].enabled&&!this.apps[e].unsupported)).map((e=>({key:e,...this.apps[e]})))},focusing(){return this.focusModeViewStateStore.currentlyFocusing},focusingOrCelebrationViewActive(){return this.focusModeViewStateStore.currentlyFocusing||this.focusModeViewStateStore.currentFocusModeView===u.VQ.Celebration}},watch:{"focusModeViewStateStore.currentFocusModeView"(e){e===u.VQ.Transition&&this.loadPlusApps()},"focusModeSessionStore.loaded":{handler(e){e&&(this.focusModeSessionStore.shouldAutoDisable&&this.$plus&&"true"!==localStorage.getItem("pomodoro-running")&&(this.stopFocusMode(!0),m.once("appsReady",(()=>{m.$e.$emit("flashMessage",{icon:o(65299),message:u.ie,button:{text:"Jump back in",action:this.startFocusMode}})}))),this.focusModeSessionStore.focusModeActive&&(this.loadPlusApps(),m.once("appsReady",(async()=>{for(const o in d.apps){var e,t;const a=l.tJ.focusModeSettings.apps[o].enabled,s=null===(e=(t=d.apps[o]).shouldEnableOnResume)||void 0===e?void 0:e.call(t);a&&s&&d.apps[o].enable(this.focusModeSessionStore.appActivationData[o])}await this.triggerFocusModeStartedEventAfterDelay()}))),m.widgetManager.appReady("focus-mode"))},immediate:!0},async"focusModeSessionStore.stop"(e){if(null===e){const e=async()=>{await this.focusModeViewStateStore.resumeFocusModeAfterTabLoad(),this.setCapacityLimitFocusModeTimeout()};v.Z.appsReady?await e():m.once("appsReady",e)}else this.focusModeViewStateStore.currentFocusModeView!==u.VQ.Idle&&(this.focusModeViewStateStore.currentFocusModeView!==u.VQ.Celebration&&(this.instantFocusingViewTransition=!0,await y.Z.doubleRaf()),await this.focusModeViewStateStore.stopFocusMode(),this.instantFocusingViewTransition=!1,m.tourActive&&m.trigger("modal:close"))},tabFocused:{handler(){this.setCapacityLimitFocusModeTimeout()},immediate:!0}},mounted(){m.on("globalEvent:click",this.focusModeSessionStore.refreshLastInteraction),m.on("focusMode:start",this.startFocusMode),m.on("focusMode:stop",this.stopFocusMode),S.Z.currentValue||m.widgetManager.appReady("focus-mode")},destroyed(){m.off("globalEvent:click",this.focusModeSessionStore.refreshLastInteraction),m.off("focusMode:start",this.startFocusMode),m.off("focusMode:stop",this.stopFocusMode)},methods:{toggleFocusModeApp(){this.closeHoverDropdown(),this.togglePopupAndCaptureIfOpen()},toggleAppOrStart(){this.popupActive||!l.tJ.focusModeSettings.oneClickFocus||this.focusing?this.toggleFocusModeApp():this.startFocusMode()},async loadPlusApps(){this.$plus||(y.Z.isSafari()||await m.widgetManager.loadWidget("tabs"),await m.widgetManager.loadWidget("soundscapes"))},openHoverDropdown(){1===this.focusModeSessionStore.start&&0===g.Z.stack.length&&(this.hoverDropdownOpen=!0,m.trigger("focusMode:hover:toggle",!0))},closeHoverDropdown(){this.hoverDropdownOpen=!1,m.trigger("focusMode:hover:toggle",!1)},triggerAppOpenEvent(){m.trigger("focusModeApp:opened")},async triggerFocusModeStartedEventAfterDelay(){await y.Z.delay(u.mQ),await y.Z.doubleRaf(),m.trigger("focusMode:started")},async startFocusMode(){if(!this.focusing)if(!this.$plus&&this.focusModeSessionStore.isOverCapacityLimit)this.openUpsell();else{await this.focusModeViewStateStore.startFocusMode();const e={};for(const t of this.activatedApps)e[t.key]=await d.apps[t.key].enable();await this.focusModeSessionStore.startAndSaveFocusMode(e),M.capture("focus mode start",{enabled_apps:this.activatedApps.map((e=>e.key))}),await this.triggerFocusModeStartedEventAfterDelay()}},async stopFocusMode(e=!1){const t=async()=>{await y.Z.delay(u.mQ),await this.focusModeSessionStore.disableAppsBeforeStop(e)};e?t():await Promise.allSettled([t(),this.focusModeViewStateStore.celebrateFocusMode()]),await this.focusModeSessionStore.stopAndSaveFocusMode();const o=this.activatedApps.map((e=>e.key)),a=Math.round((this.focusModeSessionStore.stop-this.focusModeSessionStore.start)/1e3);M.capture("focus mode stop",{enabled_apps:o,seconds_since_start:a,stopped_by_inactivity:e}),this.setCapacityLimitFocusModeTimeout()},setCapacityLimitFocusModeTimeout(){clearTimeout(this.capacityLimitInterval),this.$plus||this.focusing&&(this.capacityLimitInterval=setTimeout((()=>{if(this.focusing){if(!this.focusModeSessionStore.isOverCapacityLimit)return this.setCapacityLimitFocusModeTimeout();d.apps.pomodoro.disable(),d.apps.soundscapes.disable(),v.Z.tabFocused&&this.stopFocusMode()}}),Math.max(this.focusModeSessionStore.msUntilOverCapacityLimit+100,500)))},openUpsell(){m.cmd("modal.open","UPSELL_FOCUS_MODE",{event_source:"dash"})}}};o(9857);const F=(0,o(51900).Z)(A,s,[],!1,null,"deaa131a",null).exports,k=document.querySelector(".region.top-left"),V=document.createElement("div");k&&k.prepend(V),new a.Z({render:e=>e(F)}).$mount(V)},85346:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>v,useFocusModeSessionStore:()=>g});var a=o(63420),s=o(20144),i=o(54046),n=o(67652),r=o(70287),c=o(65228);const d=["pomodoro","soundscapes","tabStash"];var u=o(70237);let l;const p=(0,o(32542).p)((({loadedRef:e,updateAsync:t})=>(0,a.Q_)("focusModeSession",{state:()=>({start:1,stop:1,appActivationData:{},capacityLimitInfo:{msUsed:0,date:u.Z.getDateOnly(new Date)},lastInteraction:Date.now(),totalTimeFocused:0}),getters:{focusModeActive:e=>!e.stop,loaded:()=>e.value,capacityLimitInfoForToday(){const e=this.capacityLimitInfo,t=m.models.date.get("date"),o=u.Z.getDateOnly(t);return e.date!==o?{date:o,msUsed:0}:e},msUntilOverCapacityLimit(){const e=i.Le,t=this.capacityLimitInfoForToday.msUsed,o=m.models.date.get("seconds").getTime();return e-(t+(this.focusModeActive?o-this.start:0))},isOverCapacityLimit(){return this.msUntilOverCapacityLimit<=0},shouldAutoDisable(){const e=m.models.date.get("date").getTime();return this.focusModeActive&&this.lastInteraction<e-i.oF},totalTimeFocusedIncludingCurrentSession(){const e=m.models.date.get("date").getTime();let t=this.totalTimeFocused;return this.focusModeActive&&(t+=e-this.start),Math.max(t,0)}},actions:{async update(e){await t(e)},async stopAndSaveFocusMode(){const e=this.capacityLimitInfoForToday,t=Date.now(),o=t-this.start;e.msUsed+=o;const a=this.totalTimeFocused+o;await this.update({stop:t,capacityLimitInfo:e,totalTimeFocused:a,appActivationData:{}}),this.refreshLastInteraction({debounceTime:0})},async startAndSaveFocusMode(e){const t=this.capacityLimitInfoForToday;await this.update({start:Date.now(),stop:null,appActivationData:e,capacityLimitInfo:t}),this.refreshLastInteraction({debounceTime:0})},refreshLastInteraction({debounceTime:e=3e3}){this.focusModeActive&&(clearTimeout(l),l=window.setTimeout((()=>{this.update({lastInteraction:Date.now()})}),e))},async disableAppsBeforeStop(e){for(const t of d){const o=c.apps[t];o.unsupported||await o.disable({enableResult:this.appActivationData[t],inactive:e})}}}})),{mode:n.Z.Cache,syncAutomatically:!0}),h=p();(0,s.YP)((()=>h.loaded),(e=>{e&&r.Z.switchOverToWatchedStoreItem((()=>h.focusModeActive))}));const g=p,f=g(),v=()=>f},69385:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>u,useFocusModeViewStateStore:()=>d});var a=o(63420),s=o(95756),i=o(70237),n=o(54046),r=o(66383);const c=(0,s.vM)("focusModeDash",{views:{[n.VQ.Idle]:{beforeLeave:async e=>{e===n.VQ.Transition?(m.widgetManager.hideApps({layer:"focusMode"}),await i.Z.delay(n.mQ),(0,r.xk)()):e===n.VQ.Focusing&&(m.widgetManager.hideApps({layer:"focusMode"}),(0,r.xk)(),i.Z.delay(n.mQ).then((()=>{(0,r.cc)()})))},defaultView:!0},[n.VQ.Transition]:{beforeLeave:()=>{i.Z.delay(n.mQ).then((()=>{(0,r.cc)()}))}},[n.VQ.Focusing]:{beforeLeave:e=>{(0,r.LA)(),i.Z.delay(n.mQ).then((()=>{(0,r.dU)(),e===n.VQ.Idle&&m.widgetManager.showApps({layer:"focusMode"})}))}},[n.VQ.Celebration]:{beforeLeave:()=>{i.Z.delay(n.mQ).then((()=>{m.widgetManager.showApps({layer:"focusMode"})}))}}}})(),d=(0,s.t7)("focusMode",{extend:(e,t)=>(0,a.Q_)(t,{state:()=>({backgroundScale:1,backgroundBlurLayerOpacity:0,backgroundTransitionDuration:0}),getters:{currentFocusModeView:()=>c.activeViewId,currentlyFocusing(){return this.currentFocusModeView===n.VQ.Focusing},backgroundBlurLayerVisible(){return this.currentFocusModeView!==n.VQ.Idle}},actions:{async startFocusMode(){e.popupActive=!1,await c.setActiveView(n.VQ.Transition),this.backgroundTransitionDuration=n.sk,await i.Z.doubleRaf(),this.setFocusingStyleVariables(),await i.Z.delay(this.backgroundTransitionDuration),this.backgroundTransitionDuration=0},async celebrateFocusMode(){e.popupActive=!1,await c.setActiveView(n.VQ.Celebration),this.backgroundTransitionDuration=1500,await i.Z.doubleRaf(),this.resetFocusingStyleVariables(),await i.Z.delay(this.backgroundTransitionDuration),this.backgroundTransitionDuration=0,await i.Z.delay(n._d-1500)},async stopFocusMode(){e.popupActive=!1,this.resetFocusingStyleVariables(),await c.setActiveView(n.VQ.Idle)},setFocusingStyleVariables(){this.backgroundScale=1.1,this.backgroundBlurLayerOpacity=1},resetFocusingStyleVariables(){this.backgroundScale=1,this.backgroundBlurLayerOpacity=0},async resumeFocusModeAfterTabLoad(){await c.setActiveView(n.VQ.Focusing),await("visible"===document.visibilityState?i.Z.doubleRaf():i.Z.delay(0)),this.setFocusingStyleVariables()}}})}),u=d},32542:(e,t,o)=>{"use strict";o.d(t,{p:()=>n});var a=o(20144),s=o(34145),i=o(67652);const n=(e,{mode:t=i.Z.Sync,path:o="",responseProperty:n,syncAutomatically:r=!1}={})=>{const c=(0,a.iH)(!1),d=(0,a.iH)(!1),u=e=>{0!==e.length&&e.forEach((e=>p.add(e)))},l=async e=>{await m.update(h.$id,e,{appendIdToPath:!1})},p=new Set,m=new s.U("main",{mode:t,path:o}),h=e({loadedRef:c,loadingRef:d,updateAsync:async e=>{u(Object.keys(e)),g.$state={...g.$state,...e},await l(e)},refresh:async()=>{c.value||d.value?await m.refresh({id:h.$id,appendIdToPath:!1,timestampKey:h.$id}):f()}}),g=h(),f=()=>{g.$subscribe((e=>{c.value&&"payload"in e&&(u(Object.keys(e.payload)),l(e.payload))})),Object.keys(g.$state).forEach((e=>(0,a.YP)((()=>g[e]),(async t=>{c.value&&(p.has(e)?p.delete(e):await m.update(h.$id,{[e]:t},{appendIdToPath:!1}))})))),d.value=!0,m.get({id:h.$id,success:e=>{c.value=!0,d.value=!1,e&&(u(Object.keys(e)),g.$state={...g.$state,...e})},failure:e=>console.error(e),appendIdToPath:!1,responseProperty:n,timestampKey:h.$id})};return r&&f(),h}},68122:(e,t,o)=>{"use strict";async function a(e){return(await e).default}o.d(t,{Z:()=>s});const s={countdowns:()=>a(Promise.all([o.e(3064),o.e(5535)]).then(o.bind(o,55535))),metrics:()=>a(Promise.all([o.e(3064),o.e(1103),o.e(3990)]).then(o.bind(o,71103))),clocks:()=>a(Promise.all([o.e(3064),o.e(1554)]).then(o.bind(o,71554))),focus:()=>a(Promise.all([o.e(8610),o.e(4145)]).then(o.bind(o,28610))),linksViewStateStore:()=>a(o.e(9968).then(o.bind(o,89968))),linksStore:()=>a(o.e(1886).then(o.bind(o,71886))),tabsViewStateStore:()=>a(o.e(5140).then(o.bind(o,85140))),tabsStore:()=>a(o.e(3943).then(o.bind(o,63943))),focusModeViewStateStore:()=>a(o.e(9385).then(o.bind(o,69385))),focusModeSessionStore:()=>a(Promise.all([o.e(6283),o.e(5346)]).then(o.bind(o,85346)))}},34145:(e,t,o)=>{"use strict";o.d(t,{U:()=>r});var a=o(42935),s=o(24960),i=o(67652),n=o(35597);class r{constructor(e,{queryParams:t={},getResponseProperty:o,path:a="",mode:n=i.Z.Sync}={}){this.type=e,this.queryParams=t,this.getResponseProperty=o,this.path=a,this.mode=n,this.dataSync=s.Z}get({id:e,path:t=this.path||this.type,mode:o=this.mode,success:a,failure:s,queryParams:r={},retry:c,responseProperty:d=this.getResponseProperty,appendIdToPath:u,timestampKey:l=this.type}){(async()=>{var p;o===i.Z.Timestamp&&(o=await n.Z.requiresSync(l)?i.Z.Sync:i.Z.Cache,n.Z.addUpdateListener(l,this.refresh.bind(this,{id:e,path:t,queryParams:r,retry:c,responseProperty:d,appendIdToPath:u,timestampKey:l}))),t+=this.buildQueryString((null===(p=this.queryParams)||void 0===p?void 0:p.get)||{},r);const m=[this.type,{id:e,path:t,env:this.getEnv(),mode:o,retry:c,responseProperty:d,appendIdToPath:u,timestampKey:l}];o===i.Z.Server?this.dataSync.sendMessage({handler:"get",args:m}).then(a).catch(s):this.dataSync.sendRecurringCrossTabMessage({msgId:`${this.type}${e?`:${e}`:""}:refreshed`,handler:"get",args:m,success:a,failure:s})})()}refresh({id:e,path:t=this.path||this.type,queryParams:o={},retry:a,responseProperty:s=this.getResponseProperty,appendIdToPath:n,timestampKey:r=this.type}={}){return new Promise(((c,d)=>this.get({id:e,mode:i.Z.Server,path:t,queryParams:o,retry:a,success:c,failure:d,responseProperty:s,appendIdToPath:n,timestampKey:r})))}async create(e,t,{path:o=this.path||this.type,mode:a=this.mode}={}){const s=[this.type,e,t];s.push({path:o,mode:a,env:this.getEnv()}),await this.dataSync.sendMessage({handler:"create",args:s})}async update(e,t,{path:o=this.path||this.type,mode:a=this.mode,queryParams:s={},appendIdToPath:i}={}){var n;const r=this.buildQueryString((null===(n=this.queryParams)||void 0===n?void 0:n.update)||{},s),c=[this.type,e,t];c.push({path:o,mode:a,env:this.getEnv(),queryString:r,appendIdToPath:i}),await this.dataSync.sendMessage({handler:"update",args:c})}async delete(e,{path:t=this.path||this.type,mode:o=this.mode}={}){const a=[this.type,e];a.push({path:t,mode:o,env:this.getEnv()}),await this.dataSync.sendMessage({handler:"delete",args:a})}getEnv(){return{token:localStorage.getItem("token"),clientUuid:localStorage.getItem("client_uuid"),apiUrl:m.globals.urlRootApi,version:m.globals.version,tabId:a.Z}}buildQueryString(...e){const t=e.reduce(((e,t)=>({...t,...e})),{}),o=new URLSearchParams(t).toString();return o?"?"+o:""}}},95756:(e,t,o)=>{"use strict";o.d(t,{t7:()=>l,vM:()=>u});var a=o(63420),s=o(20144),i=o(96046),n=o(63139),r=o(7838),c=o(70237);const d=e=>Object.keys(e).find((t=>{var o;return null===(o=e[t])||void 0===o?void 0:o.defaultView})),u=(e,{views:t}={})=>{const o=(0,a.Q_)(e+"ViewState",{state:()=>{var o;return{activeViewId:null!==(o=t&&d(t))&&void 0!==o?o:"",beforeViewChange:()=>Promise.resolve(!0),confirmationProps:null,popupActive:!1,name:e}},getters:{activeView(e){if(!t)return null;const o=t[e.activeViewId];if(o)return o;throw new Error("No view found with id: "+e.activeViewId)},focused:()=>n.Z.isOnTop(e)},actions:{focus(){n.Z.add(e)},async setActiveView(e){var o,a;if(!t||!await this.beforeViewChange())return;let s=e;if("default"===e){const e=d(t);if(!e)throw new Error("No view found with defaultView: true");s=e}await(null===(a=null===(o=this.activeView)||void 0===o?void 0:o.beforeLeave)||void 0===a?void 0:a.call(o,s)),this.activeViewId=s},async togglePopup(e,{resetActiveView:t=!0}={}){await this.beforeViewChange()&&(await s.ZP.nextTick(),this.popupActive=null!=e?e:!this.popupActive,!this.popupActive&&t&&(this.resetBeforeViewChange(),this.confirmationProps=null,await this.setActiveView("default")))},resetBeforeViewChange(){this.beforeViewChange=()=>Promise.resolve(!0)},async setConfirmation(e){return new Promise((t=>{this.confirmationProps=e,this.confirmationProps.confirm=()=>t(!0),this.confirmationProps.cancel=()=>t(!1)})).finally((()=>{this.confirmationProps=null}))}}}),c=(0,a.Jk)(o());return r.Z.$on(e+":close",(()=>o().togglePopup(!1))),(0,s.YP)(c.popupActive,(t=>{t?n.Z.add(e):n.Z.remove(e)})),(0,s.YP)(c.confirmationProps,(t=>{(null==t?void 0:t.dashboardOverlay)&&n.Z.add(e,!0),i.Z.dashboardOverlayActive=!!(null==t?void 0:t.dashboardOverlay)})),o},l=(e,{views:t,extend:o})=>{const a=u(`base${c.Z.capitalizeFirstLetter(e)}`,{views:t}),s=o(a(),`extended${c.Z.capitalizeFirstLetter(e)}ViewState`);return p(`${e}ViewState`,a,s)},p=(e,t,o)=>{const i=t(),n=o();return(0,a.Q_)(e,(()=>({...(0,s.BK)(i),...(0,s.BK)(n)})))}},67652:(e,t,o)=>{"use strict";var a;o.d(t,{Z:()=>s}),function(e){e.Sync="sync",e.Cache="cache",e.Server="server",e.Timestamp="timestamp"}(a||(a={}));const s=a},47920:(e,t,o)=>{"use strict";o.d(t,{Z:()=>n});var a=function(){var e=this,t=e._self._c;return t("div",e._g({class:["app-dash","toggle","add-shadow",{"app-dash-icon":!!e.icon}],attrs:{"data-test":"app-dash"}},e.$listeners),[e.icon?t("base-icon",{attrs:{src:e.icon,size:e.iconSize}}):e._e(),e._v(" "),e.label?t("span",{class:{"app-dash-icon-label":!!e.icon,"u--mobile-hide":!!e.icon}},[e._v("\n\t\t"+e._s(e.label)+"\n\t")]):e._e(),e._v(" "),e._t("default")],2)};a._withStripped=!0;var s=o(84820);const i={name:"AppDash",components:{BaseIcon:s.Z},props:{label:{type:String,default:""},icon:{type:s.Z.props.src.type,default:""},iconSize:{type:s.Z.props.size.type,default:"24px"}}};o(43347);const n=(0,o(51900).Z)(i,a,[],!1,null,"fe15987a",null).exports},43347:(e,t,o)=>{var a=o(87663);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(45346).Z)("1e42dca1",a,!1,{})},9857:(e,t,o)=>{var a=o(22003);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals),(0,o(45346).Z)("b6d63628",a,!1,{})}}]);