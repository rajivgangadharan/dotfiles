(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[618],{58964:(e,t,o)=>{"use strict";o.d(t,{Z:()=>i});let s={};const i={bind:function(e,t){m.utils.isTouchDevice()&&(e.dataset.justBoundMobileBlurHandler=!0,setTimeout((()=>{e.dataset.justBoundMobileBlurHandler=!1}),100),e.dataset.mobileBlurHandlerId=Math.random().toString(36).substring(7),s[e.dataset.mobileBlurHandlerId]=t.value,e.addEventListener("focusout",t.value))},unbind:function(e){m.utils.isTouchDevice()&&(e.removeEventListener("click",s[e.dataset.mobileBlurHandlerId]),delete s[e.dataset.mobileBlurHandlerId],delete e.dataset.mobileBlurHandlerId,delete e.dataset.justBoundMobileBlurHandler)}}},59434:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>p});var s=o(8081),i=o.n(s),a=o(23645),n=o.n(a),r=o(61667),d=o.n(r),u=new URL(o(40167),o.b),c=n()(i()),l=d()(u);c.push([e.id,`\n/* stylelint-disable */\n/* Using em units for font sizing for focus because it needs to scale down for responsive more than the other regions */\nh3[data-v-64b01f1b] { margin: 0; padding: 0;\n}\n.focuses[data-v-64b01f1b] { width: 100%; position: relative; display: flex; flex-direction: column; gap: 0.5rem; align-items: center; vertical-align: top;\n}\n.focuses[data-v-64b01f1b]::before { height: 450px; width: 100%; max-width: 800px; position: absolute; top: 50%; left: 50%; z-index: -1; background: url(${l}) no-repeat 50% 60%; background-size: contain; content: " "; transform: translate3d(-50%, -50%, 0); transition: opacity 0.2s;\n}\n.pomodoro .focuses[data-v-64b01f1b] { --font-size-greeting: calc(var(--25586edc) * 3rem);\n}\n.focuses[data-v-64b01f1b] :is(.todays-focus, .focus-input, .hidden-data) { max-width: 87.5vw;\n}\n.pomodoro .focuses[data-v-64b01f1b] :is(.todays-focus, .focus-input, .hidden-data) { max-width: min(450px, 65vw);\n}\n.pomodoro .focuses[data-v-64b01f1b]:before { display: none;\n}\n.focus-wrapper[data-v-64b01f1b] { display: grid; align-items: end; justify-content: center; justify-items: center;\n}\n.focus-inner-wrapper[data-v-64b01f1b], .focus-prompt-wrapper[data-v-64b01f1b] { grid-area: 1 / 1 / 2 / 2;\n}\n.focus-wrapper .greeting[data-v-64b01f1b] { width: 100%; position: relative; display: inline-block !important; overflow: visible;\n}\n.prompt[data-v-64b01f1b] { --input-padding: 4px 2px 1px; min-width: 0; flex-shrink: 1;\n}\n[data-v-64b01f1b] .focus-question { margin: 0; font-size: 2.1875em; font-weight: 400; line-height: normal;\n}\n[data-v-64b01f1b] .focus-input, .prompt .hidden-data[data-v-64b01f1b] { width: 100%; padding: var(--input-padding); display: block; background: 0; border: 0; border-bottom: 2px solid #fff; -webkit-border-radius: 0; color: #fff; font-size: 2.25em; font-weight: 500; line-height: 1.2; outline: none; text-align: center; transition: border-color .2s ease; /* -webkit-border-radius: removes curves on iOS */\n}\n[data-v-64b01f1b] .focus-input::placeholder { color: #fff;\n}\n.prompt .hidden-data[data-v-64b01f1b] { height: 0; padding-top: 0; padding-bottom: 0; display: block; border: none; border-bottom: none; transition: none; visibility: hidden;\n}\n.focus-prompt-wrapper[data-v-64b01f1b] { width: 100%;\n}\n.focus-prompt-wrapper[data-v-64b01f1b] .three-col-layout--center { display: flex; justify-content: center;\n}\n.team-focus-wrapper[data-v-64b01f1b] { position: relative;\n}\n@media screen and (max-width: 450px) {\n.focuses[data-v-64b01f1b] {\n}\n.focuses[data-v-64b01f1b]:before { display: none;\n}\n.pomodoro .focuses[data-v-64b01f1b] { --font-size-greeting: clamp(10px, 8vw, 32px);\n}\n.focus-wrapper[data-v-64b01f1b] { padding-bottom: 6px;\n}\n.prompt[data-v-64b01f1b] { padding-bottom: 0;\n}\n[data-v-64b01f1b] .focus-question { margin-bottom: 4px !important; font-size: 20px !important;\n} /* Ensure we deep select to target both the actual question and the placeholder one in FocusContent */\n[data-v-64b01f1b] .focus-input { margin-bottom: -2px; font-size: 24px !important;\n}\n[data-v-64b01f1b] .button { --v-padding: 7px; font-size: 0.875rem;\n}\n.team-focus .side-col[data-v-64b01f1b] { flex-basis: 0;\n}\n}\n.font-sizer[data-v-64b01f1b] { height: 0; overflow: hidden; position: fixed; white-space: nowrap; font-size: 1rem !important;\n}\n`,""]);const p=c},18030:(e,t,o)=>{"use strict";o.d(t,{Z:()=>a});var s=o(70237),i=o(7838);const a=(0,o(20144).aZ)({setup:()=>({flashMessageId:null}),methods:{showFlashMessage(e){this.flashMessageId&&i.Z.$emit("flashMessage:dismiss",this.flashMessageId),this.flashMessageId=s.Z.uuidv4(),e.id=this.flashMessageId,i.Z.$emit("flashMessage",e)}}})},30618:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>x});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"focuses app-container",class:{"show-anyway":e.showAnyway.includes("focus")},attrs:{"data-test":"focus","data-show-anyway":"focus"}},[e.inPomodoro&&e.collectionReady?t("div",{staticClass:"focus-wrapper has-dash-icon pomodoro-view",attrs:{"data-ob":"focus-dash"}},[t("transition",{attrs:{name:"fade",duration:e.transitionAfterComplete?500:0,mode:"out-in"}},[e.editing?t("div",{key:"2",staticClass:"prompt"},[t("span",{staticClass:"hidden-data"},[e._v(e._s(e.activeFocus.editProps.focus??""))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.activeFocus.editProps.focus,expression:"activeFocus.editProps.focus",modifiers:{trim:!0}},{name:"mobile-blur",rawName:"v-mobile-blur",value:e.save,expression:"save"}],ref:"prompt",staticClass:"focus-input",attrs:{type:"text",placeholder:e.inputPlaceholder,"data-test":"focus-input",autocomplete:"off"},domProps:{value:e.activeFocus.editProps.focus},on:{blur:[e.save,function(t){return e.$forceUpdate()}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.activeFocus.editProps,"focus",t.target.value.trim())}}})]):t("span",{key:"1",staticClass:"greeting"},[t("transition",{attrs:{name:"fade",mode:"out-in"},on:{"after-enter":e.afterEnter}},[e.emptyFocusVisible?t("div",{key:"2"},[t("pomodoro-empty-focus",{attrs:{message:e.pomodoroMessage},on:{"add-focus":e.showPomodoroFocusInput}})],1):t("div",{key:"1",staticClass:"focus"},[t("focus-content",{attrs:{focus:e.activeFocus,"in-pomodoro":!0},on:{complete:e.completeFocus,archive:e.archiveFocus,edit:e.editCurrentFocus,new:e.archiveFocusAndShowPomodoroFocusInput}})],1)])],1)]),e._v(" "),t("transition",{attrs:{name:"fade",duration:e.transitionAfterComplete?500:0,mode:"out-in"}},[e.editing?t("span"):e._t("right-when-not-editing",null,{editFocus:e.editCurrentFocus})],2)],1):e.collectionReady?t("div",{staticClass:"focus-wrapper has-dash-icon clock-view",attrs:{"data-ob":"focus-dash"}},[t("div",{directives:[{name:"visible",rawName:"v-visible.transition.delay",value:!e.editing&&!e.emptyFocusVisible,expression:"!editing && !emptyFocusVisible",modifiers:{transition:!0,delay:!0}}],staticClass:"focus-inner-wrapper"},[t("div",{staticClass:"focus"},[t("focus-content",{attrs:{focus:e.activeFocus},on:{complete:e.completeFocus,archive:e.archiveFocus,edit:e.editCurrentFocus,new:e.archiveFocus},scopedSlots:e._u([{key:"nav",fn:function(){return[e._t("nav")]},proxy:!0}],null,!0)})],1)]),e._v(" "),t("three-col-layout",{directives:[{name:"visible",rawName:"v-visible.transition.delay",value:e.editing||e.emptyFocusVisible,expression:"editing || emptyFocusVisible",modifiers:{transition:!0,delay:!0}}],staticClass:"focus-prompt-wrapper",scopedSlots:e._u([{key:"left",fn:function(){return[e._t("nav")]},proxy:!0},{key:"center",fn:function(){return[t("div",{staticClass:"prompt"},[t("h3",{staticClass:"focus-question"},[e._v("What is your main goal for today?")]),e._v(" "),t("span",{staticClass:"hidden-data"},[e._v(e._s(e.activeFocus.editProps.focus??""))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.activeFocus.editProps.focus,expression:"activeFocus.editProps.focus",modifiers:{trim:!0}},{name:"mobile-blur",rawName:"v-mobile-blur",value:e.save,expression:"save"}],ref:"prompt",staticClass:"focus-input",attrs:{type:"text","data-test":"focus-input",autocomplete:"off"},domProps:{value:e.activeFocus.editProps.focus},on:{focus:e.editCurrentFocus,blur:[e.save,function(t){return e.$forceUpdate()}],keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.activeFocus.editProps,"focus",t.target.value.trim())}}})])]},proxy:!0}],null,!0)})],1):e._e(),e._v(" "),e.inPomodoro?e._e():[t("transition",{attrs:{name:"fade",mode:"out-in"}},[e.teamFocusEnabled?t("div",{staticClass:"team-focus-wrapper"},[t("team-focus")],1):e._e()])],e._v(" "),t("div",{ref:"font-sizer",staticClass:"font-sizer"},[e._v(e._s(e.displayedFocus))])],2)};s._withStripped=!0;var i=o(28610),a=o(58964),n=o(30827),r=o(2039),d=o(3728),u=o(42223);const c=(e,t)=>{e.style.opacity=t?"1":"0",e.style.pointerEvents=t?"":"none",e.style.visibility=t?"visible":"hidden"},l={bind:(e,{value:t})=>{c(e,t)},componentUpdated:(e,{value:t,oldValue:o,modifiers:s})=>{!t!=!o&&(s.transition&&(e.style.transition="opacity 0.5s ease, visibility 0.5s ease"),s.delay&&(e.style.transitionDelay=t?"0.5s":"0"),c(e,t))}};var p=o(70237),f=o(70287),v=o(18030),h=o(65550),b=o(20144);const g={name:"Focus",components:{FocusContent:()=>Promise.all([o.e(6283),o.e(1013),o.e(5940),o.e(3375),o.e(1794),o.e(4820),o.e(2842)]).then(o.bind(o,85996)),PomodoroEmptyFocus:()=>o.e(5028).then(o.bind(o,65028)),TeamFocus:()=>o.e(596).then(o.bind(o,10596)),ThreeColLayout:d.Z},directives:{MobileBlur:a.Z,Visible:l},mixins:[u.Z,v.Z],props:{inPomodoro:{type:Boolean,default:!1},inputPlaceholder:{type:String,default:""},pomodoroMessage:{type:String,default:"Focus"}},data:()=>({editing:!1,fontSizeScale:1,transitionAfterComplete:!1}),computed:{teamFocusEnabled(){return m.conditionalFeatures.featureEnabled("team_focus")&&!this.$touch},activeFocus:()=>i.default.activeFocus,collectionReady:()=>i.default.loaded,emptyFocusVisible:()=>i.default.emptyFocus,displayedFocus(){var e,t,o;return this.editing?null===(e=this.activeFocus)||void 0===e||null===(t=e.editProps)||void 0===t?void 0:t.focus:null===(o=this.activeFocus)||void 0===o?void 0:o.focus}},unreactive:()=>({showAnyway:n.Z,centerBelowMetadata:r.Z}),watch:{displayedFocus(){this.onFocusChange()}},mounted(){this.onFocusChange()},created(){m.on("focus:pomodoro:new",this.showPomodoroFocusInput)},destroyed(){m.off("focus:pomodoro:new",this.showPomodoroFocusInput)},methods:{editCurrentFocus(){this.editing=!0,this.activeFocus.copyProperties(),this.focusOnPrompt(),h.Z.registerEventListener("focus:edit","keyup",27,this.save)},archiveFocus(){i.default.archive()},completeFocus(){i.default.toggleComplete(),this.activeFocus.completed&&this.congratulate(),this.inPomodoro&&p.Z.delay(1e3).then((()=>{this.transitionAfterComplete=!0,this.activeFocus.completed&&this.archiveFocusAndShowPomodoroFocusInput(),p.Z.delay(1e3).then((()=>{this.transitionAfterComplete=!1,this.focusOnPrompt()}))}))},congratulate(){const e={message:p.Z.getRandomItem(["Great work!","Good job!","Nice!","Way to go!"]),icon:o(52545),...f.Z.currentValue?{buttons:[{text:"Continue focusing",action:()=>{},dismissOnClick:!0},{text:"Stop focus mode",action:()=>m.trigger("focusMode:stop"),dismissOnClick:!0,cssClasses:["button-tertiary"]}],persist:1e4}:{}};this.showFlashMessage(e)},save(){var e;this.editing&&(this.editing=!1,h.Z.removeEventListener("focus:edit","keyup",27),this.emptyFocusVisible&&(this.activeFocus.editProps.forDate=m.utils.getDateString()),null===(e=this.$refs.prompt)||void 0===e||e.blur(),i.default.save().catch(console.error))},async focusOnPrompt(){var e;await p.Z.delay(100),null===(e=this.$refs.prompt)||void 0===e||e.focus()},showPomodoroFocusInput(){this.editing=!0,this.focusOnPrompt()},archiveFocusAndShowPomodoroFocusInput(){this.archiveFocus(),this.showPomodoroFocusInput()},afterEnter(){m.trigger("focus-content:updated")},async onFocusChange(){var e;if(!this.inPomodoro)return;await p.Z.doubleRaf();const t=null===(e=this.$refs["font-sizer"])||void 0===e?void 0:e.clientWidth;this.fontSizeScale=!t||t<=150?1:t>=200?.62:1-(t-150)/50*.38}}},y=()=>{(0,b.sj)(((e,t)=>({"25586edc":e.fontSizeScale})))},w=g.setup;g.setup=w?(e,t)=>(y(),w(e,t)):y;const F=g;o(91807);const x=(0,o(51900).Z)(F,s,[],!1,null,"64b01f1b",null).exports},91807:(e,t,o)=>{var s=o(59434);s.__esModule&&(s=s.default),"string"==typeof s&&(s=[[e.id,s,""]]),s.locals&&(e.exports=s.locals),(0,o(45346).Z)("4ec87fd0",s,!1,{ssrId:!0})},40167:(e,t,o)=>{"use strict";e.exports=o.p+"4db99af162d6759d96bd.png"}}]);