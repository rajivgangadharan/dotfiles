"use strict";(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[269],{80269:(t,r,n)=>{if(n.r(r),n.d(r,{default:()=>a}),!o)var o={map:function(t,r){var n={};return r?t.map((function(t,o){return n.index=o,r.call(n,t)})):t.slice()},naturalOrder:function(t,r){return t<r?-1:t>r?1:0},sum:function(t,r){var n={};return t.reduce(r?function(t,o,e){return n.index=e,t+r.call(n,o)}:function(t,r){return t+r},0)},max:function(t,r){return Math.max.apply(null,r?o.map(t,r):t)}};var e=function(){var t=5,r=8-t;function n(r,n,o){return(r<<2*t)+(n<<t)+o}function e(t){var r=[],n=!1;function o(){r.sort(t),n=!0}return{push:function(t){r.push(t),n=!1},peek:function(t){return n||o(),void 0===t&&(t=r.length-1),r[t]},pop:function(){return n||o(),r.pop()},size:function(){return r.length},map:function(t){return r.map(t)},debug:function(){return n||o(),r}}}function u(t,r,n,o,e,u,a){var i=this;i.r1=t,i.r2=r,i.g1=n,i.g2=o,i.b1=e,i.b2=u,i.histo=a}function a(){this.vboxes=new e((function(t,r){return o.naturalOrder(t.vbox.count()*t.vbox.volume(),r.vbox.count()*r.vbox.volume())}))}function i(t,r){if(r.count()){var e=r.r2-r.r1+1,u=r.g2-r.g1+1,a=o.max([e,u,r.b2-r.b1+1]);if(1==r.count())return[r.copy()];var i,c,f,s,h=0,l=[],v=[];if(a==e)for(i=r.r1;i<=r.r2;i++){for(s=0,c=r.g1;c<=r.g2;c++)for(f=r.b1;f<=r.b2;f++)s+=t[n(i,c,f)]||0;l[i]=h+=s}else if(a==u)for(i=r.g1;i<=r.g2;i++){for(s=0,c=r.r1;c<=r.r2;c++)for(f=r.b1;f<=r.b2;f++)s+=t[n(c,i,f)]||0;l[i]=h+=s}else for(i=r.b1;i<=r.b2;i++){for(s=0,c=r.r1;c<=r.r2;c++)for(f=r.g1;f<=r.g2;f++)s+=t[n(c,f,i)]||0;l[i]=h+=s}return l.forEach((function(t,r){v[r]=h-t})),function(t){var n,o,e,u,a,c=t+"1",f=t+"2",s=0;for(i=r[c];i<=r[f];i++)if(l[i]>h/2){for(e=r.copy(),u=r.copy(),a=(n=i-r[c])<=(o=r[f]-i)?Math.min(r[f]-1,~~(i+o/2)):Math.max(r[c],~~(i-1-n/2));!l[a];)a++;for(s=v[a];!s&&l[a-1];)s=v[--a];return e[f]=a,u[c]=e[f]+1,[e,u]}}(a==e?"r":a==u?"g":"b")}}return u.prototype={volume:function(t){var r=this;return r._volume&&!t||(r._volume=(r.r2-r.r1+1)*(r.g2-r.g1+1)*(r.b2-r.b1+1)),r._volume},count:function(t){var r=this,o=r.histo;if(!r._count_set||t){var e,u,a,i=0;for(e=r.r1;e<=r.r2;e++)for(u=r.g1;u<=r.g2;u++)for(a=r.b1;a<=r.b2;a++)i+=o[n(e,u,a)]||0;r._count=i,r._count_set=!0}return r._count},copy:function(){var t=this;return new u(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(r){var o=this,e=o.histo;if(!o._avg||r){var u,a,i,c,f=0,s=1<<8-t,h=0,l=0,v=0;for(a=o.r1;a<=o.r2;a++)for(i=o.g1;i<=o.g2;i++)for(c=o.b1;c<=o.b2;c++)f+=u=e[n(a,i,c)]||0,h+=u*(a+.5)*s,l+=u*(i+.5)*s,v+=u*(c+.5)*s;o._avg=f?[~~(h/f),~~(l/f),~~(v/f)]:[~~(s*(o.r1+o.r2+1)/2),~~(s*(o.g1+o.g2+1)/2),~~(s*(o.b1+o.b2+1)/2)]}return o._avg},contains:function(t){var n=this,o=t[0]>>r;return gval=t[1]>>r,bval=t[2]>>r,o>=n.r1&&o<=n.r2&&gval>=n.g1&&gval<=n.g2&&bval>=n.b1&&bval<=n.b2}},a.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var r=this.vboxes,n=0;n<r.size();n++)if(r.peek(n).vbox.contains(t))return r.peek(n).color;return this.nearest(t)},nearest:function(t){for(var r,n,o,e=this.vboxes,u=0;u<e.size();u++)((n=Math.sqrt(Math.pow(t[0]-e.peek(u).color[0],2)+Math.pow(t[1]-e.peek(u).color[1],2)+Math.pow(t[2]-e.peek(u).color[2],2)))<r||void 0===r)&&(r=n,o=e.peek(u).color);return o},forcebw:function(){var t=this.vboxes;t.sort((function(t,r){return o.naturalOrder(o.sum(t.color),o.sum(r.color))}));var r=t[0].color;r[0]<5&&r[1]<5&&r[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,e=t[n].color;e[0]>251&&e[1]>251&&e[2]>251&&(t[n].color=[255,255,255])}},{quantize:function(c,f){if(!c.length||f<2||f>256)return!1;var s=function(o){var e,u=new Array(1<<3*t);return o.forEach((function(t){e=n(t[0]>>r,t[1]>>r,t[2]>>r),u[e]=(u[e]||0)+1})),u}(c);s.forEach((function(){}));var h=function(t,n){var o,e,a,i=1e6,c=0,f=1e6,s=0,h=1e6,l=0;return t.forEach((function(t){(o=t[0]>>r)<i?i=o:o>c&&(c=o),(e=t[1]>>r)<f?f=e:e>s&&(s=e),(a=t[2]>>r)<h?h=a:a>l&&(l=a)})),new u(i,c,f,s,h,l,n)}(c,s),l=new e((function(t,r){return o.naturalOrder(t.count(),r.count())}));function v(t,r){for(var n,o=t.size(),e=0;e<1e3;){if(o>=r)return;if(e++>1e3)return;if((n=t.pop()).count()){var u=i(s,n),a=u[0],c=u[1];if(!a)return;t.push(a),c&&(t.push(c),o++)}else t.push(n),e++}}l.push(h),v(l,.75*f);for(var g=new e((function(t,r){return o.naturalOrder(t.count()*t.volume(),r.count()*r.volume())}));l.size();)g.push(l.pop());v(g,f);for(var p=new a;g.size();)p.push(g.pop());return p}}}().quantize,u=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t.naturalWidth,this.height=this.canvas.height=t.naturalHeight,this.context.drawImage(t,0,0,this.width,this.height)};u.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var a=function(){};a.prototype.getColor=function(t,r){return void 0===r&&(r=10),this.getPalette(t,5,r)[0]},a.prototype.getPalette=function(t,r,n){var o=function(t){var r=t.colorCount,n=t.quality;if(void 0!==r&&Number.isInteger(r)){if(1===r)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");r=Math.max(r,2),r=Math.min(r,20)}else r=10;return(void 0===n||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:r,quality:n}}({colorCount:r,quality:n}),a=new u(t),i=function(t,r,n){for(var o,e,u,a,i,c=t,f=[],s=0;s<r;s+=n)e=c[0+(o=4*s)],u=c[o+1],a=c[o+2],(void 0===(i=c[o+3])||i>=125)&&(e>250&&u>250&&a>250||f.push([e,u,a]));return f}(a.getImageData().data,a.width*a.height,o.quality),c=e(i,o.colorCount);return c?c.palette():null},a.prototype.getColorFromUrl=function(t,r,n){var o=this,e=document.createElement("img");e.addEventListener("load",(function(){var u=o.getPalette(e,5,n);r(u[0],t)})),e.src=t},a.prototype.getImageData=function(t,r){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var t=new Uint8Array(this.response);i=t.length;for(var n=new Array(i),o=0;o<t.length;o++)n[o]=String.fromCharCode(t[o]);var e=n.join(""),u=window.btoa(e);r("data:image/png;base64,"+u)}},n.send()},a.prototype.getColorAsync=function(t,r,n){var o=this;this.getImageData(t,(function(t){var e=document.createElement("img");e.addEventListener("load",(function(){var t=o.getPalette(e,5,n);r(t[0],this)})),e.src=t}))}}}]);