(globalThis.webpackChunkmomentum=globalThis.webpackChunkmomentum||[]).push([[8520],{48494:(e,t,i)=>{"use strict";function o({useViewStateStore:e,analytics:t}={}){return{computed:{popupActive(){return this.viewStateStore.popupActive}},unreactive(){const i={};return e&&(i.viewStateStore=e()),t&&(i.capture=t.capture.bind(t)),t&&(i.batchCapture=t.batchCapture),i},methods:{async togglePopupAndCaptureIfOpen(e){if(await this.togglePopup(),this.popupActive){const t=e instanceof KeyboardEvent?"hotkey":"click";this.capture("app show",{source:t})}},closePopup(){this.viewStateStore.togglePopup(!1)},async togglePopup(e){const t="boolean"!=typeof e;t&&this.popupActive&&!this.viewStateStore.focused?this.viewStateStore.focus():await this.viewStateStore.togglePopup(t?void 0:e)}},provide:()=>({capture:t.capture.bind(t),batchCapture:t.batchCapture})}}i.d(t,{Z:()=>o})},18267:(e,t,i)=>{"use strict";function o({appKey:e,hideEvents:t,closeFunctionName:i,eventTriggerProperty:o}){return{created(){e&&t&&i&&o?(this.$watch(o,(i=>{i&&t.forEach((t=>m.trigger(t,e)))})),t.forEach((e=>{m.on(e,this.onHideEvent)}))):console.warn("Missing hideEventsMixin Arguments: ",e?"":"appKey",t?"":"hideEvents",i?"":"closeFunctionName",o?"":"eventTriggerProperty")},destroyed(){t.forEach((e=>{m.off(e,this.onHideEvent)}))},methods:{onHideEvent(t){t!==e&&this[i]()}}}}i.d(t,{Z:()=>o})},98520:(e,t,i)=>{"use strict";i.r(t);var o=i(83578),a=function(){var e=this,t=e._self._c;return t("app-container",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closePopup,expression:"closePopup"}],attrs:{"visible-setting":"weatherVisible","app-name":"weather",hotkey:"W","data-test":"weather",overlay:e.popupActive},on:{toggle:e.togglePopupAndCaptureIfOpen}},[t("app-dash",{staticClass:"metric-item",on:{click:function(t){return e.togglePopupAndCaptureIfOpen({source:"click"})}}},[t("div",{staticClass:"metric-stat"},[t("div",{staticClass:"current-icon"},[t("inline-svg",{staticClass:"icon",attrs:{src:e.svgIcon}})],1),e._v(" "),e.conditions?t("div",{staticClass:"current-temp",attrs:{"data-test":"temperature"}},[e._v("\n\t\t\t\t"+e._s(e.conditions.now.temperature+"Â°")+"\n\t\t\t")]):e._e()]),e._v(" "),t("div",{staticClass:"metric-label"},[t("span",{staticClass:"metric-label-name",attrs:{"data-test":"location"}},[e._v(e._s(e.location))])])]),e._v(" "),t("transition",{attrs:{name:"slide-down-fade"}},[e.popupActive?t("weather-app",{on:{close:e.closePopup}}):e._e()],1)],1)};a._withStripped=!0;var n=i(29505),r=i(40531),s=i(38267),c=i(47920),l=i(30827),d=i(81405),u=i(18267),p=i(48494);const h=(0,i(95756).vM)("weather");var w=i(63420);const v=new d.ZP({feature:"weather"}),g={name:"Weather",components:{WeatherApp:()=>Promise.all([i.e(1325),i.e(1873)]).then(i.bind(i,71873)),AppDash:c.Z,AppContainer:s.default},mixins:[(0,u.Z)({appKey:"weather",hideEvents:["globalEvent:toggle:bottom-left","globalEvent:toggle:bottom-right","globalEvent:toggle:top-right"],closeFunctionName:"closeApp",eventTriggerProperty:"popupActive"})],mixins:[(0,p.Z)({useViewStateStore:h,analytics:v})],provide(){return{viewStateStore:this.weatherViewStateStore}},computed:{conditions:()=>n.Z.conditions,location:()=>n.Z.locationName||"Weather",svgIcon(){var e,t;return(null===(e=this.conditions)||void 0===e||null===(t=e.now)||void 0===t?void 0:t.icon)||i(64419)},weatherVisible:()=>r.Fl.weatherVisible,showAnyway:()=>l.Z.includes("weather"),detailedLevelVisible(){return this.$plus&&this.popupActive},...(0,w.Kc)(h)},watch:{detailedLevelVisible(){n.Z.setDetailLevel(this.detailedLevelVisible)}},mounted(){m.widgetManager.appReady("weather")}};i(11728);const f=(0,i(51900).Z)(g,a,[],!1,null,"4dc7dbde",null).exports,y=document.querySelector(".region.top-right"),b=document.createElement("div");y.prepend(b),new o.Z({render:e=>e(f)}).$mount(b)},29505:(e,t,i)=>{"use strict";i.d(t,{Z:()=>S});var o=i(20144);const a={tornado:"wind",tropicalStorm:"wind",hurricane:"wind",severeThunderstorm:"severeStorm",thunderstorm:"storm",mixedRainAndSnow:"hail",drizzle:"drizzle",rain:"rain",freezingRain:"hail",showers:"drizzle",sunnyShowers:"drizzle",snowFlurries:"lightSnow",snow:"snow",hail:"hail",sleet:"hail",dust:"fog",foggy:"fog",haze:"fog",smoky:"fog",blustery:"wind",windy:"wind",cold:"cold",cloudy:"cloudy",mostlyCloudyNight:"cloudyNight",mostlyCloudyDay:"cloudyDay",partlyCloudyNight:"cloudyNight",partlyCloudyDay:"cloudyDay",clearNight:"clearNight",clearDay:"clearDay",scatteredThunderstorm:"storm",scatteredShowers:"drizzle",heavySnow:"snow",thundershowers:"storm",snowShowers:"snow",unknown:"unknown"},n={speed:{metricToImperial:.62137,imperialToMetric:1.60934},pressure:{metricToImperial:.02953,imperialToMetric:33.86309},shortLength:{metricToImperial:.03937,imperialToMetric:25.4},longLength:{metricToImperial:.62137,imperialToMetric:1.60934}};var r=i(40531);function s(e,t){return t?Math.round(5*(e-32)/9):e}function c(e,t,i){const o=i?{pressure:"kPa",speed:"km/h",shortLength:"mm",longLength:"km"}:{pressure:"inHg",speed:"mph",shortLength:"in",longLength:"mi"};return i?Math.round(t*n[e].imperialToMetric)+" "+o[e]:Math.round(t)+" "+o[e]}function l(e){return i(98346)(`./${a[e]}.svg`)}function d(e){return e=parseInt(e.substr(e.indexOf("T")+1,2)),r.ax.hour12clock?(e>12?e-12:0===e?12:e)+(e<12?"AM":"PM"):e+""}function u(e){let t={rain:e.rainProbability,ice:e.iceProbability,snow:e.snowProbability},i="rain",o=0;return Object.entries(t).forEach((([e,t])=>{t>o&&(i=e,o=t)})),{type:m.utils.capitalizeWords(i),chance:o}}class p{constructor(e,t){e&&e.now&&(this.metric="f"!==t,this.location=e.location,this.now=Object.assign({},e.now,{temperature:s(e.now.temperature,this.metric),icon:l(e.now.code),apparentTemperature:s(e.now.apparentTemperature,this.metric),windGust:c("speed",e.now.windGust,this.metric),windSpeed:c("speed",e.now.windSpeed,this.metric),precipitationType:e.now.hasPrecipitation?e.now.precipitationType:"Rain",precipAmount6Hours:c("shortLength",e.now.precipAmount6Hours,this.metric)}))}}class h extends p{constructor(e,t){super(e,t),e&&e.now&&(this.now=Object.assign({},e.now,this.now,{precipAmount:c("shortLength",e.now.precipAmount,this.metric),temperature:s(e.now.temperature,this.metric),visibility:c("longLength",e.now.visibility,this.metric),sunrise:e.now.sunrise?m.utils.getHoursMinsStr(new Date(e.now.sunrise)):"AM",sunset:e.now.sunset?m.utils.getHoursMinsStr(new Date(e.now.sunset)):"PM",pressure:c("pressure",parseFloat(e.now.pressure),this.metric),pressureChanging:"Steady"!==e.now.pressureTendency,pressureRotation:"Falling"===e.now.pressureTendency?180:0,precipitationChance:u(e.now)}),e.hours&&e.days&&(this.hours=e.hours.map((e=>Object.assign({},e,{apparentTemperature:s(e.apparentTemperature,this.metric),temperature:s(e.temperature,this.metric),windGust:c("speed",e.windGust,this.metric),windSpeed:c("speed",e.windSpeed,this.metric),icon:l(e.code),hour:d(e.hour)}))),this.days=e.days.map((e=>Object.assign({},e,{apparentHigh:s(e.apparentHigh,this.metric),apparentLow:s(e.apparentLow,this.metric),high:s(e.high,this.metric),low:s(e.low,this.metric),windGust:c("speed",e.windGust,this.metric),windSpeed:c("speed",e.windSpeed,this.metric),icon:l(e.code),precipitationChance:u(e)})))))}}var w=i(96046);const v="weather:forecast",g="weather:location",f="detailLastUpdated",y="baseLastUpdated",b="weather:nextUpdate",S=new(o.ZP.extend({name:"WeatherDataService",data:()=>({conditionsRaw:localStorage.getObject(v),manualLocation:localStorage.getObject(g),detailed:!1,noConnection:!1,loading:!1}),unreactive:()=>({refreshTimeoutId:null}),computed:{conditions(){return this.conditionsRaw?new(this.detailed?h:p)(this.conditionsRaw,r.ax.temperatureUnit):null},locationName(){var e,t;return(null===(e=this.manualLocation)||void 0===e?void 0:e.shortName)||(null===(t=this.conditions)||void 0===t?void 0:t.location.locationName)},tabVisible:()=>w.Z.tabVisible},watch:{conditionsRaw(e){e&&localStorage.setObject(v,e),this.setRefreshTimeout()},tabVisible(e){e?this.setRefreshTimeout():clearTimeout(this.refreshTimeoutId)},detailed(e){e&&this.refreshIfOutdated()}},created(){!function(){const e=localStorage.getObject("weather-manual");e&&(localStorage.setObject("weather:location",{latitude:e.latitude,longitude:e.longitude,name:e.locationName,shortName:e.locationName}),localStorage.removeItem("weather-manual")),localStorage.removeItem("weather")}(),window.addEventListener("storage",this.onStorageEvent),this.setRefreshTimeout()},methods:{setLocation(e){JSON.stringify(this.manualLocation)!==JSON.stringify(e)&&(e?localStorage.setObject(g,e):localStorage.removeItem(g),this.manualLocation=e,this.refreshFromServer())},setDetailLevel(e){this.detailed=e},onStorageEvent(e){const t=e=>e&&JSON.parse(e);if((null==e?void 0:e.key)===v&&null!=e&&e.newValue){var i;const o=t(e.newValue);o[y]>((null===(i=this.conditionsRaw)||void 0===i?void 0:i[y])||0)&&(this.conditionsRaw=o)}else(null==e?void 0:e.key)===g&&(this.manualLocation=t(e.newValue))},getLastUpdated(){const e=localStorage.getObject(v);return e?parseInt(e[this.detailed?f:y]||0):0},getTimeToNextUpdate(){const e=parseInt(localStorage.getItem(b)),t=Date.now(),i=18e5-(t-this.getLastUpdated());return e?Math.max(e-t,i,0):Math.max(i,0)},refreshIfOutdated(){this.getTimeToNextUpdate()<=0&&this.tabVisible&&this.refreshFromServer()},setRefreshTimeout(){clearTimeout(this.refreshTimeoutId),this.refreshTimeoutId=setTimeout(this.refreshIfOutdated,this.getTimeToNextUpdate())},async refreshFromServer(){const e=this.detailed;if(this.loading)return;this.loading=!0;let t="weather/"+(e?"forecast":"current");this.manualLocation&&(t+=`?lat=${this.manualLocation.latitude}&lon=${this.manualLocation.longitude}`);try{const{data:i}=await this.$xhr.get(t),o=Date.now();i[y]=o,e&&(i[f]=o),localStorage.removeItem(b),this.conditionsRaw=Object.assign({},this.conditionsRaw||{},i),this.noConnection=!1}catch(e){console.error(e);const t=e.response;t&&429===t.status&&t.headers["retry-after"]?(localStorage.setItem(b,Date.now()+1e3*parseInt(t.headers["retry-after"])),this.setRefreshTimeout()):this.noConnection=!0}finally{this.loading=!1}}}}))},87663:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(8081),a=i.n(o),n=i(23645),r=i.n(n)()(a());r.push([e.id,".app-dash[data-v-fe15987a]{white-space:nowrap}",""]);const s=r},8596:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});var o=i(8081),a=i.n(o),n=i(23645),r=i.n(n)()(a());r.push([e.id,"\n/* stylelint-disable */\n.app-container[data-v-4dc7dbde] { order: 0; align-self: flex-start;\n}\n.app-dash[data-v-4dc7dbde] { line-height: normal;\n}\n.metric-label[data-v-4dc7dbde] { white-space: nowrap;\n}\n.metric-stat[data-v-4dc7dbde] { display: flex; align-items: baseline; justify-content: flex-end;\n}\n.current-icon[data-v-4dc7dbde] { margin-right: 6px;\n}\n.icon[data-v-4dc7dbde] { --icon-size: 25px; display: block;\n}\n",""]);const s=r},95756:(e,t,i)=>{"use strict";i.d(t,{t7:()=>u,vM:()=>d});var o=i(63420),a=i(20144),n=i(96046),r=i(63139),s=i(7838),c=i(70237);const l=e=>Object.keys(e).find((t=>{var i;return null===(i=e[t])||void 0===i?void 0:i.defaultView})),d=(e,{views:t}={})=>{const i=(0,o.Q_)(e+"ViewState",{state:()=>{var i;return{activeViewId:null!==(i=t&&l(t))&&void 0!==i?i:"",beforeViewChange:()=>Promise.resolve(!0),confirmationProps:null,popupActive:!1,name:e}},getters:{activeView(e){if(!t)return null;const i=t[e.activeViewId];if(i)return i;throw new Error("No view found with id: "+e.activeViewId)},focused:()=>r.Z.isOnTop(e)},actions:{focus(){r.Z.add(e)},async setActiveView(e){var i,o;if(!t||!await this.beforeViewChange())return;let a=e;if("default"===e){const e=l(t);if(!e)throw new Error("No view found with defaultView: true");a=e}await(null===(o=null===(i=this.activeView)||void 0===i?void 0:i.beforeLeave)||void 0===o?void 0:o.call(i,a)),this.activeViewId=a},async togglePopup(e,{resetActiveView:t=!0}={}){await this.beforeViewChange()&&(await a.ZP.nextTick(),this.popupActive=null!=e?e:!this.popupActive,!this.popupActive&&t&&(this.resetBeforeViewChange(),this.confirmationProps=null,await this.setActiveView("default")))},resetBeforeViewChange(){this.beforeViewChange=()=>Promise.resolve(!0)},async setConfirmation(e){return new Promise((t=>{this.confirmationProps=e,this.confirmationProps.confirm=()=>t(!0),this.confirmationProps.cancel=()=>t(!1)})).finally((()=>{this.confirmationProps=null}))}}}),c=(0,o.Jk)(i());return s.Z.$on(e+":close",(()=>i().togglePopup(!1))),(0,a.YP)(c.popupActive,(t=>{t?r.Z.add(e):r.Z.remove(e)})),(0,a.YP)(c.confirmationProps,(t=>{(null==t?void 0:t.dashboardOverlay)&&r.Z.add(e,!0),n.Z.dashboardOverlayActive=!!(null==t?void 0:t.dashboardOverlay)})),i},u=(e,{views:t,extend:i})=>{const o=d(`base${c.Z.capitalizeFirstLetter(e)}`,{views:t}),a=i(o(),`extended${c.Z.capitalizeFirstLetter(e)}ViewState`);return p(`${e}ViewState`,o,a)},p=(e,t,i)=>{const n=t(),r=i();return(0,o.Q_)(e,(()=>({...(0,a.BK)(n),...(0,a.BK)(r)})))}},47920:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var o=function(){var e=this,t=e._self._c;return t("div",e._g({class:["app-dash","toggle","add-shadow",{"app-dash-icon":!!e.icon}],attrs:{"data-test":"app-dash"}},e.$listeners),[e.icon?t("base-icon",{attrs:{src:e.icon,size:e.iconSize}}):e._e(),e._v(" "),e.label?t("span",{class:{"app-dash-icon-label":!!e.icon,"u--mobile-hide":!!e.icon}},[e._v("\n\t\t"+e._s(e.label)+"\n\t")]):e._e(),e._v(" "),e._t("default")],2)};o._withStripped=!0;var a=i(84820);const n={name:"AppDash",components:{BaseIcon:a.Z},props:{label:{type:String,default:""},icon:{type:a.Z.props.src.type,default:""},iconSize:{type:a.Z.props.size.type,default:"24px"}}};i(43347);const r=(0,i(51900).Z)(n,o,[],!1,null,"fe15987a",null).exports},43347:(e,t,i)=>{var o=i(87663);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,i(45346).Z)("1e42dca1",o,!1,{})},11728:(e,t,i)=>{var o=i(8596);o.__esModule&&(o=o.default),"string"==typeof o&&(o=[[e.id,o,""]]),o.locals&&(e.exports=o.locals),(0,i(45346).Z)("253ab6c6",o,!1,{ssrId:!0})},98346:(e,t,i)=>{var o={"./clearDay.svg":92123,"./clearNight.svg":45378,"./cloudy.svg":41917,"./cloudyDay.svg":64419,"./cloudyNight.svg":41614,"./cold.svg":12035,"./drizzle.svg":14504,"./fog.svg":22958,"./hail.svg":74396,"./lightSnow.svg":67312,"./rain.svg":38951,"./severeStorm.svg":55677,"./snow.svg":42798,"./storm.svg":57570,"./unknown.svg":29964,"./wind.svg":36826};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}a.keys=function(){return Object.keys(o)},a.resolve=n,e.exports=a,a.id=98346}}]);